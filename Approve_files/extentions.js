(function(){function ajax(){}ajax.prototype={autoInit:true,xhr:null,loadObject:null,timeout:null,method:"POST",async:true,parameters:"",notify:{},headers:{"X-Requested-With":"XMLHttpRequest","Accept":"text/javascript, text/html, application/xml, text/xml, */*"},encoding:"utf-8",init:function(){console.log("Ajax init")},getHttpObject:function(loadObj){var ajaxObject=new XMLHttpRequest()||new ActiveXObject("Microsoft.XMLHTTP");ajaxObject.onreadystatechange=function(){if(ajaxObject.readyState===4){if(ajaxObject.status!=200){fnb.hyperion.ajax.handleErrors(ajaxObject,loadObj)}else{fnb.hyperion.ajax.success(ajaxObject,loadObj)}}else{if(ajaxObject.readyState===2){fnb.hyperion.ajax.complete(ajaxObject,loadObj)}}};return ajaxObject},request:function(loadObj){this.loadObject=loadObj;this.xhr=this.getHttpObject(loadObj);this.beforeSend(loadObj,this.xhr);var method=(loadObj.type)?loadObj.type.toUpperCase():this.method;var async=(loadObj.async)?loadObj.async:this.async;var data=loadObj.params;var url=(method=="GET")?(data)?loadObj.url+"?"+data:loadObj.url:loadObj.url;this.xhr.open(method,url,async);if(method=="POST"){var encoding=(this.encoding)?"; charset="+this.encoding:"";this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"+encoding)}for(var i in this.headers){try{xhr.setRequestHeader(i,this.headers[i])}catch(e){}}this.xhr.send((data)?data:"")},handleErrors:function(xhr,loadObj){if(loadObj.error){switch(xhr.status){case 0:loadObj.status="Error";loadObj.statusText="A result could not be retrieved from Online Banking. Please check your Internet connection before you continue. If you were performing a financial transaction, please check your transaction history to determine if the transaction was processed before you try again.";if(!loadObj.ajaxAborted){this.error(xhr,loadObj)}fnb.hyperion.controller.checkEziState(loadObj.method);break;case 400:this.error(xhr,loadObj);break;case 401:this.error(xhr,loadObj);break;case 403:this.error(xhr,loadObj);break;case 404:this.error(xhr,loadObj);break;case 405:this.error(xhr,loadObj);break;case 406:case 408:this.error(xhr,loadObj);break;case 500:this.error(xhr,loadObj);break;default:this.error(xhr,loadObj)}}},reset:function(){this.xhr=null;this.timeout=null;this.method="POST";this.async=true;this.parameters="";this.headers={"X-Requested-With":"XMLHttpRequest","Accept":"text/javascript, text/html, application/xml, text/xml, */*"};this.encoding="utf-8"},beforeSend:function(xhr,loadObj){if(loadObj.beforeSend){var method=loadObj.method;if(!method){method=""}loadObj.xhr=xhr;fnb.hyperion.controller.raiseEvent(method+"BeforeSend",loadObj)}},complete:function(xhr,loadObj){if(loadObj.complete){var method=loadObj.method;if(!method){method=""}loadObj.xhr=xhr;loadObj.textStatus=xhr.textStatus;fnb.hyperion.controller.raiseEvent(method+"Complete",loadObj)}},success:function(xhr,loadObj){loadObj.xhr=xhr;loadObj.data=(loadObj.xhr.responseText)?loadObj.xhr.responseText:(loadObj.xhr.response)?loadObj.xhr.response:loadObj.xhr.responseXML;var method=loadObj.method;if(loadObj.validate!=false){if(!fnb.hyperion.controller.validateXHR(xhr,loadObj.postLoadingCallBack,method)){return}if(!fnb.hyperion.controller.validResponse(loadObj)){return}if(fnb.hyperion.utils.ajax.otp.test(loadObj)){return}}if(loadObj.success){var method=loadObj.method;if(!method){method=""}fnb.hyperion.controller.raiseEvent(method+"Success",loadObj)}},error:function(xhr,loadObj){var status=(xhr.status===0)?loadObj.status:xhr.status;var statusText=(xhr.status===0)?loadObj.statusText:xhr.statusText;fnb.hyperion.controller.error(status+" : "+statusText,loadObj.method)},stop:function(sender){if(this.xhr){console.log("Sender: "+sender+" requested an ajax abort on "+this.loadObject.method);this.loadObject.ajaxAborted=true;this.xhr.abort();console.log("Ajax aborted.")}},destroy:function(){fnb.hyperion.ajax={}}};fnb.namespace("ajax",ajax,true)})();(function(){function animate(animateObject){animateObject=function(node,cssGroup,time,ease){node=(node)?(node.elem)?node.elem:node:0.1;var attribute,object,queue=[],callback=function(node){if(node=queue.shift()){node[1]?animateObject.apply(this,node).animate(callback):0<node[0]?setTimeout(callback,1000*node[0]):(node[0](),callback())}};node.charAt&&(node=document.getElementById(node));if(0<node||!node){cssGroup={},time=0,callback(queue=[[node||0]])}expand(cssGroup,{padding:0,margin:0,border:"Width"},[top,right,bottom,left]);expand(cssGroup,{borderRadius:"Radius"},[top+left,top+right,bottom+right,bottom+left]);++animInstance;for(attribute in cssGroup){object=cssGroup[attribute],!object.to&&0!==object.to&&(object=cssGroup[attribute]={to:object}),animateObject.definitions(object,node,attribute,ease)}animateObject.iterate(cssGroup,1000*time,callback);return{animate:function(){queue.push([].slice.call(arguments));return this},wait:function(){queue.push([].slice.call(arguments));return this},callBack:function(){queue.push([].slice.call(arguments));return this}}};var top="Top",right="Right",bottom="Bottom",left="Left",animInstance=1,expand=function(node,elem,direction,attribute,index,dimention,obj){for(attribute in node){if(attribute in elem){obj=node[attribute];for(index=0;dimention=direction[index];index++){node[attribute.replace(elem[attribute],"")+dimention+(elem[attribute]||"")]={to:0===obj.to?obj.to:obj.to||obj,fr:obj.from,elem:obj.e}}delete node[attribute]}}},getRequestFrame=function(win,frame){return win["webkitR"+frame]||win["mozR"+frame]||win["msR"+frame]||win["r"+frame]||win["oR"+frame]}(window,"equestAnimationFrame");animateObject.definitions=function(obj,elem,node,b,g){g=elem.style;obj.node=node;obj.bottom=elem;obj.s=node in g?g:elem;obj.e=obj.e||b;obj.from=obj.from||(0===obj.from?0:obj.s==elem?elem[node]:(window.getComputedStyle?getComputedStyle(elem,null):elem.currentStyle)[node]);obj.u=(/\d(\D+)$/.exec(obj.to)||/\d(\D+)$/.exec(obj.from)||[0,0])[1];obj.fn=/color/i.test(node)?animateObject.effects.color:animateObject.effects[node]||animateObject.effects.func;obj.mx="anim_"+node;elem[obj.mx]=obj.mxv=animInstance;elem[obj.mx]!=obj.mxv&&(obj.mxv=null)};animateObject.iterate=function(node,time,callback){var iter,unique,obj,newTime,effect,calcTime=+new Date+time;iter=function(top){unique=calcTime-(top||(new Date).getTime());if(50>unique){for(obj in node){obj=node[obj],obj.property=1,obj.fn(obj,obj.bottom,obj.to,obj.from,obj.node,obj.e)}callback&&callback()}else{unique/=time;for(obj in node){obj=node[obj];if(obj.bottom[obj.mx]!=obj.mxv){return}effect=obj.e;newTime=unique;"lin"==effect?newTime=1-newTime:"ease"==effect?(newTime=2*(0.5-newTime),newTime=1-(newTime*newTime*newTime-3*newTime+2)/4):"ease-in"==effect?(newTime=1-newTime,newTime*=newTime*newTime):newTime=1-newTime*newTime*newTime;obj.property=newTime;obj.fn(obj,obj.bottom,obj.to,obj.from,obj.node,obj.e)}getRequestFrame?getRequestFrame(iter):setTimeout(iter,20,0)}};iter()};animateObject.effects={func:function(obj,node,to,from,attribute){from=parseFloat(from)||0;to=parseFloat(to)||0;obj.s[attribute]=(1<=obj.property?to:obj.property*(to-from)+from)+obj.u},width:function(obj,node,to,from,attribute,d){0<=obj._fr||(obj._fr=!isNaN(from=parseFloat(from))?from:"width"==attribute?node.clientWidth:node.clientHeight);animateObject.effects.func(obj,node,to,obj._fr,attribute,d)},opacity:function(obj,node,to,from,attribute){if(isNaN(from=from||obj.from)){from=node.style,from.zoom=1,from=obj._fr=(/alpha\(opacity=(\d+)\from/i.exec(from.filter)||{})[1]/100||1}from*=1;to=obj.property*(to-from)+from;node=node.style;attribute in node?node[attribute]=to:node.filter=1<=to?"":"alpha("+attribute+"="+Math.round(100*to)+")"},color:function(obj,node,to,from,attribute,d,c,j){obj.ok||(to=obj.to=animateObject.toRGBA(to),from=obj.from=animateObject.toRGBA(from),0==to[3]&&(to=[].concat(from),to[3]=0),0==from[3]&&(from=[].concat(to),from[3]=0),obj.ok=1);j=[0,0,0,obj.property*(to[3]-from[3])+1*from[3]];for(c=2;0<=c;c--){j[c]=Math.round(obj.property*(to[c]-from[c])+1*from[c])}(1<=j[3]||animateObject.rgbaIE)&&j.pop();try{obj.s[attribute]=(3<j.length?"rgba(":"rgb(")+j.join(",")+")"}catch(k){animateObject.rgbaIE=1}}};animateObject.effects.height=animateObject.effects.width;animateObject.RGBA=/#(.)(.)(.)\b|#(..)(..)(..)\b|(\d+)%,(\d+)%,(\d+)%(?:,([\d\.]+))?|(\d+),(\d+),(\d+)(?:,([\d\.]+))?\b/;animateObject.toRGBA=function(node,colorArray){colorArray=[0,0,0,0];node.replace(/\s/g,"").replace(animateObject.RGBA,function(node,b,g,d,c,animateObject,k,top,right,bottom,p,q,r,s,t){k=[b+b||c,g+g||animateObject,d+d||k];b=[top,right,bottom];for(node=0;3>node;node++){k[node]=parseInt(k[node],16),b[node]=Math.round(2.55*b[node])}colorArray=[k[0]||b[0]||q||0,k[1]||b[1]||r||0,k[2]||b[2]||s||0,p||t||1]});return colorArray};return animateObject}fnb.namespace("animate",animate,true)})();(function(){var browser;var pending={};var testCount=0;var doc=this.document;var head=doc.head||doc.getElementsByTagName("head")[0];var queue={css:[],js:[]};styleSheets=doc.styleSheets;function createNode(name,attrs){var node=doc.createElement(name),attr;for(attr in attrs){if(attrs.hasOwnProperty(attr)){node.setAttribute(attr,attrs[attr])}}return node}function finish(type){var pendingType=pending[type];var callback;var urls;if(pendingType){callback=pendingType.callback;urls=pendingType.urls;urls.shift();testCount=0;if(!urls.length){callback&&callback.call(pendingType.context,pendingType.obj);pending[type]=null;queue[type].length&&load(type)}}}function getBrowser(){var ua=navigator.userAgent;browser={async:doc.createElement("script").async===true};(browser.webkit=/AppleWebKit\//.test(ua))||(browser.ie=/MSIE|Trident/.test(ua))||(browser.opera=/Opera/.test(ua))||(browser.gecko=/Gecko\//.test(ua))||(browser.unknown=true)}function load(type,urls,callback,obj,context){var _finish=function(){finish(type)};var isCSS=type==="css";var nodes=[];var i;var len;var node;var p;var pendingUrls;var url;browser||getBrowser();if(urls){urls=typeof urls==="string"?[urls]:urls.concat();if(isCSS||browser.async||browser.gecko||browser.opera){queue[type].push({urls:urls,callback:callback,obj:obj,context:context})}else{for(i=0,len=urls.length;i<len;++i){queue[type].push({urls:[urls[i]],callback:i===len-1?callback:null,obj:obj,context:context})}}}if(pending[type]||!(p=pending[type]=queue[type].shift())){return}head||(head=doc.head||doc.getElementsByTagName("head")[0]);pendingUrls=p.urls.concat();for(i=0,len=pendingUrls.length;i<len;++i){url=pendingUrls[i];if(isCSS){node=browser.gecko?createNode("style"):createNode("link",{href:url,rel:"stylesheet"})}else{node=createNode("script",{src:url});node.async=false}node.className=type+"Loaded";node.setAttribute("charset","utf-8");if(browser.ie&&!isCSS&&"onreadystatechange" in node&&!("draggable" in node)){node.onreadystatechange=function(){if(/loaded|complete/.test(node.readyState)){node.onreadystatechange=null;_finish()}}}else{if(isCSS&&(browser.gecko||browser.webkit)){if(browser.webkit){p.urls[i]=node.href;testWebKit()}else{node.innerHTML='@import "'+url+'";';testGecko(node)}}else{node.onload=node.onerror=_finish}}nodes.push(node)}for(i=0,len=nodes.length;i<len;++i){head.appendChild(nodes[i])}}function testGecko(node){var hasRules;try{hasRules=!!node.sheet.cssRules}catch(ex){testCount+=1;if(testCount<200){setTimeout(function(){testGecko(node)},50)}else{hasRules&&finish("css")}return}finish("css")}function testWebKit(){var css=pending.css,i;if(css){i=styleSheets.length;while(--i>=0){if(styleSheets[i].href===css.urls[0]){finish("css");break}}testCount+=1;if(css){if(testCount<200){setTimeout(testWebKit,50)}else{finish("css")}}}}function getScripts(html){var scripts=new Array();var imports=new Array();if(fnb.hyperion.controller.is(html)){while(html.indexOf("<script")>-1||html.indexOf("<\/script")>-1){var startScriptTag=html.indexOf("<script");var endScriptTag=html.indexOf(">",startScriptTag);var closedStartScriptTag=html.indexOf("<\/script",startScriptTag);var closedEndScriptTag=html.indexOf(">",closedStartScriptTag);var importTestString=html.substring(startScriptTag,closedEndScriptTag+1);var srcUrl=importTestString.match(/src="[\s\S]*?"/g);if(srcUrl){var data=(importTestString.match(/data-jsp='[\s\S]*?'/g))?importTestString.match(/data-jsp='[\s\S]*?'/g)[0].replace("data-jsp='","").replace("'",""):null;var rawUrl=srcUrl[0].replace('src="',"").replace('"',"");if(data){var dataKey=rawUrl.split("/").pop().split(".js")[0];fnb.hyperion.load.includesData[dataKey]=JSON.parse(data)}imports.push(rawUrl)}else{scripts.push(html.substring(endScriptTag+1,closedStartScriptTag))}html=html.substring(0,startScriptTag)+html.substring(closedEndScriptTag+1)}}return{scripts:scripts,html:html,imports:imports}}function getCss(html){var imports=new Array();var styles=new Array();if(fnb.hyperion.controller.is(html)){while(html.indexOf("<link")>-1||html.indexOf("</link")>-1){var startLinkTag=html.indexOf("<link");var endLinkTag=html.indexOf(">",startLinkTag);var importTestString=html.substring(startLinkTag,endLinkTag+1);var linkString=importTestString.match(/href="[\s\S]*?"/g);if(linkString){imports.push(linkString[0].replace('href="',"").replace('"',""))}html=html.substring(0,startLinkTag)+html.substring(endLinkTag+1)}while(html.indexOf("<style")>-1||html.indexOf("</style")>-1){var startStyleTag=html.indexOf("<style");var endStyleTag=html.indexOf(">",startStyleTag);var closedStartStyleTag=html.indexOf("</style",startStyleTag);var closedEndStyleTag=html.indexOf(">",closedStartStyleTag);styles.push(html.substring(endStyleTag+1,closedStartStyleTag));html=html.substring(0,startStyleTag)+html.substring(closedEndStyleTag+1)}}return{styles:styles,html:html,imports:imports}}function addStyles(target,styles){for(var i=0;i<styles.length;i++){var style=document.createElement("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=styles[i]}else{style.appendChild(document.createTextNode(styles[i]))}target.insertBefore(style,(target.hasChildNodes())?target.childNodes[0]:null)}}function clearCss(){var styles=head.getElementsByClassName("cssLoaded");for(var i=0;i<styles.length;i++){head.removeChild(styles[i])}}function clearJs(){var scripts=head.getElementsByClassName("jsLoaded");for(var i=0;i<scripts.length;i++){head.removeChild(scripts[i])}fnb.hyperion.load.includesData={}}function loader(){}loader.prototype={includesData:{},js:function(urls,callback,obj,context){load("js",urls,callback,obj,context)},css:function(urls,callback,obj,context){load("css",urls,callback,obj,context)},styles:function(target,styles){addStyles(target,styles)},clearCss:function(urls,callback){clearCss()},clearJs:function(){clearJs()},collectScripts:function(data){return getScripts(data)},collectCss:function(data){return getCss(data)},evalScripts:function(scripts){for(var i=0;i<scripts.length;i++){try{window.eval(scripts[i])}catch(e){console.log("Error: utils.ajax.scripts: "+e)}}},destroy:function(){fnb.hyperion.load={}}};fnb.namespace("load",loader,true)})();(function(){var audits=[{string:"getElementById",error:'Please do not use javascript getElementById. Use e.g. fnb.hyperion.$("#example")'},{string:"getElementsByClassName",error:'Please do not use javascript getElementsByClassName. Use e.g. fnb.hyperion.$(".example")'},{string:"getElementsByName",error:'Please do not use javascript getElementsByName. Use e.g. fnb.hyperion.$("@example")'},{string:"getElementsByTagName",error:'Please do not use javascript getElementsByTagName. Use e.g. fnb.hyperion.$("=example")'},{string:"querySelector",error:'Please do not use javascript querySelector. Use e.g. fnb.hyperion.$("!example")'},{string:"querySelectorAll",error:'Please do not use javascript querySelectorAll. Use e.g. fnb.hyperion.$("*example")'},{string:"setAttribute",error:'Please do not use javascript setAttribute. Use e.g. fnb.hyperion.$("#example").attr("attr", "attrValue")'},{string:"getAttribute",error:'Please do not use javascript getAttribute. Use e.g. fnb.hyperion.$("#example").attr("attr")'},{string:"parentNode",error:'Please do not use javascript parentNode. Use e.g. fnb.hyperion.$("#example").parent()'},{string:".style",error:'Please do not use javascript .style. Use e.g. fnb.hyperion.$(".example").css("width","10px")'},{string:".classList",error:'Please do not use javascript .classList. Use e.g. fnb.hyperion.$(".example").addClass("example")'},{string:".display ",error:'Please do not use javascript .display . Use e.g. fnb.hyperion.$(".example").show()'}];function audit(){}audit.prototype={test:function(fn){var errors="";var stringFunction=fn.toString();for(var audit in audits){if(audits.hasOwnProperty(audit)){var auditObject=audits[audit];var find=stringFunction.indexOf(auditObject.string);if(find!=-1){errors=(errors=="")?"Page Object Error:\n - "+auditObject.error:errors+"\n - "+auditObject.error}}}if(errors!=""){alert(errors)}},destroy:function(){fnb.hyperion.audit={}}};fnb.namespace("audit",audit,true)})();(function(){function cookies(){}cookies.prototype={defaults:{},expiresMultiplier:60*60*24,init:function(){},set:function(key,value,options){if(fnb.hyperion.cookies.utils.isPlainObject(key)){for(var k in key){if(key.hasOwnProperty(k)){this.set(k,key[k],value)}}}else{options=fnb.hyperion.cookies.utils.isPlainObject(options)?options:{expires:options};var expires=options.expires!==undefined?options.expires:(this.defaults.expires||""),expiresType=typeof(expires);if(expiresType==="string"&&expires!==""){expires=new Date(expires)}else{if(expiresType==="number"){expires=new Date(+new Date+1000*this.expiresMultiplier*expires)}}if(expires!==""&&"toGMTString" in expires){expires=";expires="+expires.toGMTString()}var path=options.path||this.defaults.path;path=path?";path="+path:"";var domain=options.domain||this.defaults.domain;domain=domain?";domain="+domain:"";var secure=options.secure||this.defaults.secure?";secure":"";var namespace=options.namespace||this.defaults.namespace?this.defaults.namespace:"";document.cookie=fnb.hyperion.cookies.utils.escape(namespace+key)+"="+fnb.hyperion.cookies.utils.escape(value)+expires+path+domain+secure}return this},remove:function(keys){keys=fnb.hyperion.cookies.utils.isArray(keys)?keys:fnb.hyperion.cookies.utils.toArray(arguments);var namespace=this.defaults.namespace?this.defaults.namespace:"";for(var i=0,l=keys.length;i<l;i++){this.set(namespace+keys[i],"",-1)}return this},empty:function(){return this.remove(fnb.hyperion.cookies.utils.getKeys(this.all()))},get:function(keys,fallback){fallback=fallback||undefined;var cookies=this.all();var namespace=this.defaults.namespace?this.defaults.namespace:"";if(fnb.hyperion.cookies.utils.isArray(keys)){var result={};for(var i=0,l=keys.length;i<l;i++){var value=namespace+keys[i];result[value]=fnb.hyperion.cookies.utils.retrieve(cookies[value],fallback)}return result}else{return fnb.hyperion.cookies.utils.retrieve(cookies[namespace+keys],fallback)}},all:function(){if(document.cookie===""){return{}}var cookies=document.cookie.split("; "),result={};for(var i=0,l=cookies.length;i<l;i++){var item=cookies[i].split("=");result[decodeURIComponent(item[0])]=decodeURIComponent(item[1])}return result},enabled:function(){if(navigator.cookieEnabled){return true}var ret=fnb.hyperion.cookies.set("_","_").get("_")==="_";fnb.hyperion.cookies.remove("_");return ret},destroy:function(){fnb.tracking.cookies={}}};cookies.prototype.utils={isArray:Array.isArray||function(value){return Object.prototype.toString.call(value)==="[object Array]"},isPlainObject:function(value){return !!value&&Object.prototype.toString.call(value)==="[object Object]"},toArray:function(value){return Array.prototype.slice.call(value)},getKeys:Object.keys||function(obj){var keys=[],key="";for(key in obj){if(obj.hasOwnProperty(key)){keys.push(key)}}return keys},escape:function(value){return String(value).replace(/[,;"\\=\s%]/g,function(character){return encodeURIComponent(character)})},retrieve:function(value,fallback){return value==null?fallback:value}};fnb.namespace("cookies",cookies,true)})();(function(){function debounce(func,wait,immediate){var timeout;return function(){var context=this;var args=arguments;clearTimeout(timeout);timeout=setTimeout(function(){timeout=null;if(!immediate){func.apply(context,args)}},wait);if(immediate&&!timeout){func.apply(context,args)}}}fnb.namespace("debounce",debounce)})();(function(){var win=window;var namespaceExpression=/[^\.]*(?=\..*)\.|.*/;var nameExpression=/\..*/;var addEvent="addEventListener";var removeEvent="removeEventListener";var doc=document||{};var root=doc.documentElement||{};var model=root[addEvent];var eventSupport=model?addEvent:"attachEvent";var oneObject={};var standardNativeEvents="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll";var modelNativeEvents="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ";function addPolyfill(e){var type=e.type==="focus"?"focusin":"focusout";if(typeof CustomEvent==="function"){var event=new CustomEvent(type,{bubbles:true,cancelable:false});event.c1Generated=true;e.target.dispatchEvent(event)}}function removePolyfill(e){if(!e.c1Generated){doc.removeEventListener("focus",addPolyfill,true);doc.removeEventListener("blur",addPolyfill,true);doc.removeEventListener("focusin",removePolyfill,true);doc.removeEventListener("focusout",removePolyfill,true)}setTimeout(function(){doc.removeEventListener("focusin",removePolyfill,true);doc.removeEventListener("focusout",removePolyfill,true)})}if(win.onfocusin===undefined){doc.addEventListener("focus",addPolyfill,true);doc.addEventListener("blur",addPolyfill,true);doc.addEventListener("focusin",removePolyfill,true);doc.addEventListener("focusout",removePolyfill,true)}var slice=Array.prototype.slice;var stringToArray=function(string,devider){return string.split(devider||" ")};var isString=function(obj){return typeof obj=="string"};var isFunction=function(obj){return typeof obj=="function"};var convertNativeEvents=(function(hash,events,i){for(i=0;i<events.length;i++){events[i]&&(hash[events[i]]=1)}return hash}({},stringToArray(standardNativeEvents+(model?modelNativeEvents:""))));var handleCustomEvents=(function(){var isAscendant="compareDocumentPosition" in root?function(element,container){return container.compareDocumentPosition&&(container.compareDocumentPosition(element)&16)===16}:"contains" in root?function(element,container){container=container.nodeType===9||container===window?root:container;return container!==element&&container.contains(element)}:function(element,container){while(element=element.parentNode){if(element===container){return 1}}return 0},verify=function(event){var related=event.relatedTarget;return !related?related==null:(related!==this&&related.prefix!=="xul"&&!/document/.test(this.toString())&&!isAscendant(related,this))};return{mouseenter:{base:"mouseover",condition:verify},mouseleave:{base:"mouseout",condition:verify},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}());var Event=(function(){var commonProps=stringToArray("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName");var mouseProps=commonProps.concat(stringToArray("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement"));var mouseWheelProps=mouseProps.concat(stringToArray("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis"));var keyProps=commonProps.concat(stringToArray("char charCode key keyCode keyIdentifier keyLocation location"));var textProps=commonProps.concat(stringToArray("data"));var touchProps=commonProps.concat(stringToArray("touches targetTouches changedTouches scale rotation"));var messageProps=commonProps.concat(stringToArray("data origin source"));var stateProps=commonProps.concat(stringToArray("state"));var overOutRegex=/over|out/;var typeFixers=[{reg:/key/i,fix:function(event,newEvent){newEvent.keyCode=event.keyCode||event.which;return keyProps}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(event,newEvent,type){newEvent.rightClick=event.which===3||event.button===2;newEvent.pos={x:0,y:0};if(event.pageX||event.pageY){newEvent.clientX=event.pageX;newEvent.clientY=event.pageY}else{if(event.clientX||event.clientY){newEvent.clientX=event.clientX+doc.body.scrollLeft+root.scrollLeft;newEvent.clientY=event.clientY+doc.body.scrollTop+root.scrollTop}}if(overOutRegex.test(type)){newEvent.relatedTarget=event.relatedTarget||event[(type=="mouseover"?"from":"to")+"Element"]}return mouseProps}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return mouseWheelProps}},{reg:/^text/i,fix:function(){return textProps}},{reg:/^touch|^gesture/i,fix:function(){return touchProps}},{reg:/^message$/i,fix:function(){return messageProps}},{reg:/^popstate$/i,fix:function(){return stateProps}},{reg:/.*/,fix:function(){return commonProps}}];var fixedTypeMap={};var Event=function(event,element,isNative){if(!arguments.length){return}event=event||((element.ownerDocument||element.document||element).parentWindow||win).event;this.originalEvent=event;this.isNative=isNative;if(!event){return}var type=event.type;var target=event.target||event.srcElement;var i;var l;var p;var properties;var fixed;this.target=target&&target.nodeType===3?target.parentNode:target;if(isNative){fixed=fixedTypeMap[type];if(!fixed){for(i=0,l=typeFixers.length;i<l;i++){if(typeFixers[i].reg.test(type)){fixedTypeMap[type]=fixed=typeFixers[i].fix;break}}}properties=fixed(event,this,type);for(i=properties.length;i--;){if(!((p=properties[i]) in this)&&p in event){this[p]=event[p]}}}};Event.prototype.preventDefault=function(){if(this.originalEvent.preventDefault){this.originalEvent.preventDefault()}else{this.originalEvent.returnValue=false}};Event.prototype.stopPropagation=function(){if(this.originalEvent.stopPropagation){this.originalEvent.stopPropagation()}else{this.originalEvent.cancelBubble=true}};Event.prototype.stop=function(){this.preventDefault();this.stopPropagation();this.stopped=true};Event.prototype.stopImmediatePropagation=function(){if(this.originalEvent.stopImmediatePropagation){this.originalEvent.stopImmediatePropagation()}this.isImmediatePropagationStopped=function(){return true}};Event.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()};Event.prototype.clone=function(currentTarget){var newEvent=new Event(this,this.element,this.isNative);newEvent.currentTarget=currentTarget;return newEvent};return Event}());var targetElement=function(element,isNative){return !model&&!isNative&&(element===doc||element===win)?root:element};var registryEntry=(function(){var wrappedHandler=function(element,fn,condition,args){var call=function(event,eargs){return fn.apply(element,args?slice.call(eargs,event?0:1).concat(args):eargs)};var findTarget=function(event,eventElement){return fn.__delegateDEL?fn.__delegateDEL.ft(event.target,element):eventElement};var handler=condition?function(event){var target=findTarget(event,this);if(condition.apply(target,arguments)){if(event){event.currentTarget=target}return call(event,arguments)}}:function(event){if(fn.__delegateDEL){event=event.clone(findTarget(event))}return call(event,arguments)};handler.__delegateDEL=fn.__delegateDEL;return handler},registryEntry=function(element,type,handler,original,namespaces,args,root){var customType=handleCustomEvents[type];var isNative;if(type=="unload"){handler=once(removeListener,element,type,handler,original)}if(customType){if(customType.condition){handler=wrappedHandler(element,handler,customType.condition,args)}type=customType.base||type}this.isNative=isNative=convertNativeEvents[type]&&!!element[eventSupport];this.customType=!model&&!isNative&&type;this.element=element;this.type=type;this.original=original;this.namespaces=namespaces;this.eventType=model||isNative?type:"propertychange";this.target=targetElement(element,isNative);this[eventSupport]=!!this.target[eventSupport];this.root=root;this.handler=wrappedHandler(element,handler,null,args)};registryEntry.prototype.inNamespaces=function(namespaces){var i,j,c=0;if(!namespaces){return true}if(!this.namespaces){return false}for(i=namespaces.length;i--;){for(j=this.namespaces.length;j--;){if(namespaces[i]==this.namespaces[j]){c++}}}return namespaces.length===c};registryEntry.prototype.matches=function(element,original,handler){return this.element===element&&(!original||this.original===original)&&(!handler||this.handler===handler)};return registryEntry}());var registry=(function(){var map={};var forAll=function(element,type,original,handler,root,fn){var prefix=root?"x":"@";if(!type||type=="*"){for(var t in map){if(t.charAt(0)==prefix){forAll(element,t.substr(1),original,handler,root,fn)}}}else{var i=0,l,list=map[prefix+type],all=element=="*";if(!list){return}for(l=list.length;i<l;i++){if((all||list[i].matches(element,original,handler))&&!fn(list[i],list,i,type)){return}}}};var has=function(element,type,original,root){var i,list=map[(root?"x":"@")+type];if(list){for(i=list.length;i--;){if(!list[i].root&&list[i].matches(element,original,null)){return true}}}return false};var get=function(element,type,original,root){var entries=[];forAll(element,type,original,null,root,function(entry){return entries.push(entry)});return entries};var put=function(entry){var has=!entry.root&&!this.has(entry.element,entry.type,null,false),key=(entry.root?"x":"@")+entry.type;(map[key]||(map[key]=[])).push(entry);return has};var del=function(entry){forAll(entry.element,entry.type,null,entry.handler,entry.root,function(entry,list,i){list.splice(i,1);entry.removed=true;if(list.length===0){delete map[(entry.root?"x":"@")+entry.type]}return false})};var entries=function(){var t,entries=[];for(t in map){if(t.charAt(0)=="@"){entries=entries.concat(map[t])}}return entries};return{has:has,get:get,put:put,del:del,entries:entries}}());var Selector;var setSelector=function(e){if(!arguments.length){Selector=doc.querySelectorAll?function(s,r){return r.querySelectorAll(s)}:function(){console.log("Delegate: Couldnt select element")}}else{Selector=e}};var rootListener=function(event,type){if(!model&&type&&event&&event.propertyName!="_on"+type){return}var listeners=registry.get(this,type||event.type,null,false);var l=listeners.length;var i=0;event=new Event(event,this,true);if(type){event.type=type}for(;i<l&&!event.isImmediatePropagationStopped();i++){if(!listeners[i].removed){listeners[i].handler.call(this,event)}}};var listener=model?function(element,type,add){element[add?addEvent:removeEvent](type,rootListener,false)}:function(element,type,add,custom){var entry;if(add){registry.put(entry=new registryEntry(element,custom||type,function(event){rootListener.call(element,event,custom)},rootListener,null,null,true));if(custom&&element["_on"+custom]==null){element["_on"+custom]=0}entry.target.attachEvent("on"+entry.eventType,entry.handler)}else{entry=registry.get(element,custom||type,rootListener,true)[0];if(entry){entry.target.detachEvent("on"+entry.eventType,entry.handler);registry.del(entry)}}};var once=function(remove,element,type,fn,originalFn){return function(){fn.apply(this,arguments);remove(element,type,originalFn)}};var removeListener=function(element,orgType,handler,namespaces,stringComp){var type=orgType&&orgType.replace(nameExpression,"");var handlers=registry.get(element,type,null,false);var removed={};var i;var l;for(i=0,l=handlers.length;i<l;i++){if(stringComp){if((!handler||handlers[i].original.toString()==handler.toString())&&handlers[i].inNamespaces(namespaces)){registry.del(handlers[i]);if(!removed[handlers[i].eventType]&&handlers[i][eventSupport]){removed[handlers[i].eventType]={t:handlers[i].eventType,c:handlers[i].type}}}}else{if((!handler||handlers[i].original==handler)&&handlers[i].inNamespaces(namespaces)){registry.del(handlers[i]);if(!removed[handlers[i].eventType]&&handlers[i][eventSupport]){removed[handlers[i].eventType]={t:handlers[i].eventType,c:handlers[i].type}}}}}for(i in removed){if(!registry.has(element,removed[i].t,null,false)){listener(element,removed[i].t,false,removed[i].c)}}};var delegate=function(selector,fn){var findTarget=function(target,root){var i,array=isString(selector)?Selector(selector,root):selector;for(;target&&target!==root;target=target.parentNode){for(i=array.length;i--;){if(array[i]===target){return target}}}};var handler=function(e){var match=findTarget(e.target,this);if(match){fn.apply(match,arguments)}};handler.__delegateDEL={ft:findTarget,selector:selector};return handler};var triggerListener=model?function(isNative,type,element){var evt=doc.createEvent(isNative?"HTMLEvents":"UIEvents");evt[isNative?"initEvent":"initUIEvent"](type,true,true,win,1);element.dispatchEvent(evt)}:function(isNative,type,element){element=targetElement(element,isNative);isNative?element.fireEvent("on"+type,doc.createEventObject()):element["_on"+type]++};var off=function(element,typeSpec,fn,stringComp){var isTypeStr=isString(typeSpec);var k;var type;var namespaces;var i;if(isTypeStr&&typeSpec.indexOf(" ")>0){typeSpec=stringToArray(typeSpec);for(i=typeSpec.length;i--;){off(element,typeSpec[i],fn)}return element}type=isTypeStr&&typeSpec.replace(nameExpression,"");if(type&&handleCustomEvents[type]){type=handleCustomEvents[type].base}if(!typeSpec||isTypeStr){if(namespaces=isTypeStr&&typeSpec.replace(namespaceExpression,"")){namespaces=stringToArray(namespaces,".")}removeListener(element,type,fn,namespaces,stringComp)}else{if(isFunction(typeSpec)){removeListener(element,null,typeSpec,null,stringComp)}else{for(k in typeSpec){if(typeSpec.hasOwnProperty(k)){off(element,k,typeSpec[k])}}}}return element};var on=function(element,events,selector,fn){var originalFn;var type;var types;var i;var args;var entry;var first;if(selector===undefined&&typeof events=="object"){for(type in events){if(events.hasOwnProperty(type)){on.call(this,element,type,events[type])}}return}if(!isFunction(selector)){originalFn=fn;args=slice.call(arguments,4);fn=delegate(selector,originalFn,selector)}else{args=slice.call(arguments,3);fn=originalFn=selector}types=stringToArray(events);if(this===oneObject){fn=once(off,element,events,fn,originalFn)}for(i=types.length;i--;){first=registry.put(entry=new registryEntry(element,types[i].replace(nameExpression,""),fn,originalFn,stringToArray(types[i].replace(namespaceExpression,""),"."),args,false));if(entry[eventSupport]&&first){listener(element,entry.eventType,true,entry.customType)}}return element};var one=function(){return on.apply(oneObject,arguments)};var trigger=function(element,type,args){var types=stringToArray(type);var i;var j;var l;var names;var handlers;element=(element.elem)?element.elem:element;for(i=types.length;i--;){type=types[i].replace(nameExpression,"");if(names=types[i].replace(namespaceExpression,"")){names=stringToArray(names,".")}if(!names&&!args&&element[eventSupport]){triggerListener(convertNativeEvents[type],type,element)}else{handlers=registry.get(element,type,null,false);args=[false].concat(args);for(j=0,l=handlers.length;j<l;j++){if(handlers[j].inNamespaces(names)){handlers[j].handler.apply(element,args)}}}}return element};var clone=function(element,from,type){var handlers=registry.get(from,type,null,false);var l=handlers.length;var i=0;var args,delegateDEL;for(;i<l;i++){if(handlers[i].original){args=[element,handlers[i].type];if(delegateDEL=handlers[i].handler.__delegateDEL){args.push(delegateDEL.selector)}args.push(handlers[i].original);on.apply(null,args)}}return element};if(win.attachEvent){var cleanup=function(){var i,entries=registry.entries();for(i in entries){if(entries[i]&&entries[i].type&&entries[i].type!=="unload"){off(entries[i].element,entries[i].type)}}win.detachEvent("onunload",cleanup);win.CollectGarbage&&win.CollectGarbage()};win.attachEvent("onunload",cleanup)}setSelector();function delegate(){}delegate.on=on;delegate.one=one;delegate.off=off;delegate.trigger=trigger;delegate.clone=clone;delegate.Event=Event;fnb.namespace("delegate",delegate)})();(function(){function horizontalScroller(){this.doc=fnb.hyperion.$(document).elem;this.startX=null;this.endX=null;this.startOffset=null;this.scrollableParent=null;this.scrollerChildren=null;this.x=0;this.currentIndex=0;this.scrollSpeed=0;this.fixedStops=true;this.scrollStopWidth=0;this.maxStops=0;this.moveTreshold=0.3;this.tapTreshold=0;this.tap=function(){};this.afterStop=function(index){};this.doVertical=false;this.startElement=null;this.bindLive=false;this.enabled=false;this.moving=false;this.initialized=false;this.internalEvent=false;var parent=this;function isset(v){return(typeof v!="undefined")}function mouseX(event){return(isset(event.targetTouches))?event.targetTouches[0].pageX:event.pageX}this.bindEvents=function(){this.bindEvents()};function start(e){if(parent.enabled){parent.startElement=e.target;parent.startX=parent.endX=mouseX(e);var moveEvent=(fnb.hyperion.controller.isMobile==true)?"touchmove":"mousemove";var upEvent=(fnb.hyperion.controller.isMobile==true)?"touchend":"mouseup";var leaveEvent=(fnb.hyperion.controller.isMobile==true)?null:"mouseleave";fnb.hyperion.delegate.on(parent.doc,moveEvent,move);fnb.hyperion.delegate.on(parent.doc,upEvent,end);if(leaveEvent){fnb.hyperion.delegate.on(parent.doc,leaveEvent,cancel)}}}function move(e){if(parent.enabled){if(Math.abs(mouseX(e)-parent.startX)>5){parent.moving=true;event.preventDefault();if(parent.startX!==null&&parent.scrollableParent.elem!==null){parent.endX=mouseX(e);var val=parent.x+(parent.endX-parent.startX);parent.scrollableParent.elem.style.left=val+"px"}}}}function end(e){if(parent.fixedStops&&parent.startX!==null&&parent.endX!==null&&parent.scrollableParent.elem!==null){parent.moveToClosest();parent.startElement=e.target;var moveX=Math.abs(parent.startX-parent.endX);if(moveX<=parent.tapTreshold*parent.scrollStopWidth){if(parent.startElement!=null){parent.tap(parent.startElement)}}}parent.startX=parent.endX=parent.startElement=null;var moveEvent=(fnb.hyperion.controller.isMobile==true)?"touchmove":"mousemove";var upEvent=(fnb.hyperion.controller.isMobile==true)?"touchend":"mouseup";var leaveEvent=(fnb.hyperion.controller.isMobile==true)?null:"mouseleave";fnb.hyperion.delegate.off(parent.doc,moveEvent,move);fnb.hyperion.delegate.off(parent.doc,upEvent,end);if(leaveEvent){fnb.hyperion.delegate.off(parent.doc,leaveEvent,cancel)}}function cancel(e){e.preventDefault();if(parent.fixedStops&&parent.startX!==null&&parent.endX!==null&&parent.scrollableParent.elem!==null){parent.moveToClosest()}parent.startX=parent.endX=parent.startElement=null}this.moveToClosest=function(){var _this=this;var moveX=this.startX-this.endX,currI=Math.round((-1*this.x)/this.scrollStopWidth),newI=currI,newloc=this.scrollStopWidth*(currI);if(moveX>this.moveTreshold*this.scrollStopWidth&&currI+1<=(this.maxStops)){newI=currI+1}if(((-1)*moveX)>this.moveTreshold*this.scrollStopWidth&&currI-1>=0){newI=currI-1}newloc=Math.round(this.scrollStopWidth*(newI));this.currentIndex=newI;this.x=-1*(newloc);fnb.hyperion.horizontalScroller.slide(this.scrollableParent.elem).stop();fnb.hyperion.horizontalScroller.slide(this.scrollableParent.elem).move({x:(-1*newloc)},this.scrollSpeed,function(){setTimeout(function(){if(_this.afterStop){_this.afterStop(_this.currentIndex)}parent.moving=false},200)})};this.moveTo=function(index,nostop){if(this.initialized==false||this.internalEvent==true){var newloc=this.scrollStopWidth*(index);var _this=this;fnb.hyperion.horizontalScroller.slide(this.scrollableParent.elem).stop();fnb.hyperion.horizontalScroller.slide(this.scrollableParent.elem).move({x:(-1*newloc)},this.scrollSpeed,function(){setTimeout(function(){if(_this.afterStop){_this.afterStop(index)}parent.moving=false},200)});this.currentIndex=index;this.x=-1*(newloc);this.internalEvent=false;this.initialized=true}};this.next=function(){if(this.currentIndex+1<=this.maxStops){this.internalEvent=true;this.moving=true;this.moveTo(this.currentIndex+1)}};this.previous=function(){if(this.currentIndex-1>=0){this.internalEvent=true;this.moving=true;this.moveTo(this.currentIndex-1)}};this.centerIndex=function(index){if(this.scrollableParent.elem!==null){if(isset(index)){this.currentIndex=index}else{index=this.currentIndex}var loc=-1*((index)*this.scrollStopWidth);this.scrollableParent.css("left",loc+"px");fnb.hyperion.horizontalScroller.slide(this.scrollableParent.elem).stop();this.x=loc}};this.end=end;this.bindEvents=function(){if(this.scrollerChildren!==null){var startEvent=(fnb.hyperion.controller.isMobile==true)?"touchstart":"mousedown";fnb.hyperion.delegate.on(this.scrollableParent.elem,startEvent,this.scrollerChildren,start)}}}fnb.namespace("horizontalScroller",horizontalScroller)})();(function(){var animateId=0,animateInstances={};function getPosition(element){var position={x:element.offsetLeft,y:element.offsetTop};return position}function createInterval(element,interval,speed,start,position,style,tmp,callback){clearInterval(element.fx[interval]);if(start[style[0]]!=position[style[0]]){element.fx[interval]=setInterval(function(){start[style[0]]+=(position[style[0]]-start[style[0]])*speed;start[style[1]]+=(position[style[1]]-start[style[1]])*speed;fnb.hyperion.horizontalScroller.slide[tmp](element,start);if(start[style[0]]&&start[style[1]]){if(Math.round(start[style[0]])==position[style[0]]&&Math.round(start[style[1]])==position[style[1]]){fnb.hyperion.horizontalScroller.slide[tmp](element,position);callCallback(element,interval,callback)}}else{if(!start[style[0]]&&start[style[1]]){if(Math.round(start[style[1]])==position[style[1]]){fnb.hyperion.horizontalScroller.slide[tmp](element,position);callCallback(element,interval,callback)}}else{if(start[style[0]]&&!start[style[1]]){if(Math.round(start[style[0]])==position[style[0]]){fnb.hyperion.horizontalScroller.slide[tmp](element,position);callCallback(element,interval,callback)}}}}},1)}}function wrap(element){if(!element.fx){element.fx={move:0}}return element}function callCallback(element,interval,callback){clearInterval(element.fx[interval]);if(callback){callback.call(element)}}function end(x,y,speed){return x<y?min(x+speed,y):max(x-speed,y)}function slide(element,id){if(!(this instanceof fnb.hyperion.horizontalScroller.slide)){for(var key in animateInstances){if(animateInstances[key].element===element){return animateInstances[key]}}animateId++;animateInstances[animateId]=new fnb.hyperion.horizontalScroller.slide(element,animateId);return animateInstances[animateId]}this.element=wrap(element);this.id=id}slide.prototype={move:function(position,speed,callback){var start=getPosition(this.element);createInterval(this.element,"move",speed/100,start,position,["x","y"],"position",callback)},stop:function(){var interval=["move"],index=interval.length;while(index--){clearInterval(this.element.fx[interval[index]])}},destroy:function(){animateInstances={}}};slide.position=function(element,position){var currentElementPosAttr=window.getComputedStyle(element,null).getPropertyValue("position");var style=wrap(element).style;style.position=(currentElementPosAttr=="relative")?"relative":"absolute";if(position.x){style.left=position.x+"px"}if(position.y){style.top=position.y+"px"}};slide.wrap=wrap;fnb.namespace("horizontalScroller.slide",slide)})();(function(){var isReadyList;var DOMContentLoaded;var classType={};classType["[object Boolean]"]="boolean";classType["[object Number]"]="number";classType["[object String]"]="string";classType["[object Function]"]="function";classType["[object Array]"]="array";classType["[object Date]"]="date";classType["[object RegExp]"]="regexp";classType["[object Object]"]="object";var readyObj={isReady:false,readyWait:1,waitReady:function(hold){if(hold){readyObj.readyWait++}else{readyObj.ready(true)}},ready:function(wait){if((wait===true&&!--readyObj.readyWait)||(wait!==true&&!readyObj.isReady)){if(!document.body){return setTimeout(readyObj.ready,1)}readyObj.isReady=true;if(wait!==true&&--readyObj.readyWait>0){return}isReadyList.executeCallbacks(document,[readyObj])}},bindEvents:function(){if(isReadyList){return}isReadyList=readyObj.callbackManager();if(document.readyState==="complete"){return setTimeout(readyObj.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",readyObj.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",readyObj.ready);var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel){doScrollCheck()}}}},callbackManager:function(){var callbacks=[];var fired;var firing;var cancelled;var callbackHandler={done:function(){if(!cancelled){var args=arguments;var i;var length;var elem;var type;var _fired;if(fired){_fired=fired;fired=0}for(i=0,length=args.length;i<length;i++){elem=args[i];type=readyObj.type(elem);if(type==="array"){callbackHandler.done.apply(callbackHandler,elem)}else{if(type==="function"){callbacks.push(elem)}}}if(_fired){callbackHandler.executeCallbacks(_fired[0],_fired[1])}}return this},executeCallbacks:function(context,args){if(!cancelled&&!fired&&!firing){args=args||[];firing=1;try{while(callbacks[0]){callbacks.shift().apply(context,args)}}finally{fired=[context,args];firing=0}}return this},resolve:function(){callbackHandler.executeCallbacks(this,arguments);return this},isResolved:function(){return !!(firing||fired)},cancel:function(){cancelled=1;callbacks=[];return this}};return callbackHandler},type:function(obj){return obj==null?String(obj):classType[Object.prototype.toString.call(obj)]||"object"}};function doScrollCheck(){if(readyObj.isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}readyObj.ready()}if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);readyObj.ready()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);readyObj.ready()}}}}function ready(func){readyObj.bindEvents();var type=readyObj.type(func);isReadyList.done(func)}fnb.namespace("ready",ready)})();(function(){var serializedObject;function serializeTarget(target){serializedObject=[];exculdeEmpty=false;if(!target.hasOwnProperty("dataParams")){var formElements=target.find("*input,select,button,textarea");if(formElements.length()==0){serializeObject(target.elem)}else{formElements.each(function(element){serializeObject(element.elem)})}}else{var data="";var paramObject=target;for(var key in paramObject){if(paramObject.hasOwnProperty(key)){var keyVal=(key==""||key==undefined)?undefined:key;var value=(paramObject[key]=="")?undefined:paramObject[key];if(keyVal==undefined||value==undefined||keyVal=="dataParams"){data=""}else{data=keyVal+"="+encodeURIComponent(value);serializedObject.push(data)}}}}return serializedObject.join("&")}function serializeObject(element){switch(element.nodeName){case"INPUT":var data=processInput(element);if(data){serializedObject.push(data)}break;case"TEXTAREA":serializedObject.push(processTextArea(element));break;case"SELECT":if(processSelect(element)){serializedObject.push(processSelect(element))}break;case"BUTTON":if(processButton(element)){serializedObject.push(processButton(element))}break}}function processInput(element){var data="";switch(element.type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":if(element.getAttribute("data-type")=="masked"){var simpleDataValue=element.value.replace(new RegExp(/ /g),"");var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;simpleDataValue=(simpleDataValue=="")?undefined:simpleDataValue;if((name==undefined||simpleDataValue==undefined)&&exculdeEmpty==true){data=""}else{value=(simpleDataValue==undefined)?"":value;data=name+"="+encodeURIComponent(simpleDataValue)}}else{if(element.getAttribute("data-placeholder")==element.value){var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;var value="";if(exculdeEmpty==true){data=""}else{data=name+"="+encodeURIComponent(value)}}else{var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;var value=(element.value=="")?undefined:element.value;var inputType=element.getAttribute("data-type");if((name==undefined||value==undefined)&&exculdeEmpty==true){data=""}else{if(inputType=="currency"&&value!=""&&value!=undefined){value=value.replace(/,/g,"")}value=(value==undefined)?"":value;data=name+"="+encodeURIComponent(value)}}}return data;break;case"checkbox":if(element.getAttribute("checked")=="true"||element.getAttribute("checked")=="checked"||element.getAttribute("checked")=="CHECKED"||element.getAttribute("data-unCheckedValue")){var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;var valueAttr=element.value;var unCheckedValue=element.getAttribute("data-unCheckedValue");var checkedValue=element.getAttribute("data-checkedValue");var value="";if(unCheckedValue&&!element.getAttribute("checked")){value=unCheckedValue}else{if(checkedValue&&element.getAttribute("checked")){value=checkedValue}else{if(!checkedValue&&element.getAttribute("checked")){value=valueAttr}else{if(valueAttr=="on"){value="true"}else{value=""}}}}if((name==undefined||value==undefined)&&exculdeEmpty==true){data=""}else{value=(value==undefined)?"":value;data=name+"="+encodeURIComponent(value)}}return data;break;case"radio":if(element.getAttribute("checked")=="true"||element.getAttribute("checked")=="checked"||element.getAttribute("checked")=="CHECKED"){var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;var value=element.value;if((name==undefined||value==undefined)&&exculdeEmpty==true){data=""}else{value=(value==undefined)?"":value;data=name+"="+encodeURIComponent(value)}}return data;break;case"file":break}return}function processTextArea(element){var data=element.name+"="+encodeURIComponent(element.value);return data}function processSelect(element){var data="";var j;switch(element.type){case"select-one":data=element.name+"="+encodeURIComponent(element.value);return data;break;case"select-multiple":for(j=element.options.length-1;j>=0;j=j-1){if(element.options[j].selected){var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;var value=(element.value=="")?undefined:element.options[j].value;if((name==undefined||value==undefined)&&exculdeEmpty==true){data=""}else{data=name+"="+encodeURIComponent(value)}return data}}break}return}function processButton(element){var data="";switch(element.type){case"reset":case"submit":case"button":var name=(element.name==""||element.name==undefined)?(element.id==""||element.id==undefined)?undefined:element.id:element.name;var value=(element.value=="")?undefined:element.value;if((name==undefined||value==undefined)&&exculdeEmpty==true){data=""}else{data=name+"="+encodeURIComponent(value)}return data;break}return}function serialize(){}serialize.prototype={autoInit:true,init:function(){},get:function(target){return serializeTarget(target)},destroy:function(){fnb.hyperion.utils.serialize={}}};fnb.namespace("serialize",serialize,true)})();(function(){function clean(node){var l=node.c.length;while(l--){if(typeof node.c[l]=="object"){clean(node.c[l])}}node.n=node.a=node.c=null}function format(node,indent,achar,buffer){var xml=indent+"<"+node.n,nc=node.c.length,attr,child,i=0;for(attr in node.a){xml+=" "+attr+'="'+node.a[attr]+'"'}xml+=nc?">":" />";buffer.push(xml);if(nc){do{child=node.c[i++];if(typeof child=="string"){if(nc==1){return buffer.push(buffer.pop()+child+"</"+node.n+">")}else{buffer.push(indent+achar+child)}}else{if(typeof child=="object"){format(child,indent+achar,achar,buffer)}}}while(i<nc);buffer.push(indent+"</"+node.n+">")}}function XMLWriter(encoding,version){if(encoding){this.encoding=encoding}if(version){this.version=version}}XMLWriter.prototype={encoding:"ISO-8859-1",version:"1.0",formatting:"indented",indentChar:"\t",indentation:1,newLine:"\n",autoInit:false,init:function(){},startDocument:function(standalone){this.close();this.stack=[];this.standalone=standalone},endDocument:function(){this.active=this.root;this.stack=[]},docType:function(dt){this.doctype=dt},startElement:function(name,namespace){if(namespace){name=namespace+":"+name}var node={n:name,a:{},c:[]};if(this.active){this.active.c.push(node);this.stack.push(this.active)}else{this.root=node}this.active=node},endElement:function(){this.active=this.stack.pop()||this.root},attributeString:function(name,value){if(this.active){this.active.a[name]=value}},string:function(text){if(this.active){this.active.c.push(text)}},elementString:function(name,text,namespace){this.startElement(name,namespace);this.string(text);this.endElement()},CDATA:function(text){this.string("<![CDATA["+text+"]]>")},comment:function(text){this.string("<!-- "+text+" -->")},flush:function(){if(this.stack&&this.stack[0]){this.endDocument()}var achar="",indent="",num=this.indentation,formatting=this.formatting.toLowerCase()=="indented",buffer='<&#63;xml version="'+this.version+'" encoding="'+this.encoding+'"';buffer=buffer.replace("&#63;","?");if(this.standalone!==undefined){buffer+=' standalone="'+!!this.standalone+'"'}buffer+=" ?>";buffer=[buffer];if(this.doctype&&this.root){buffer.push("<!DOCTYPE "+this.root.n+" "+this.doctype+">")}if(formatting){while(num--){achar+=this.indentChar}}if(this.root){format(this.root,indent,achar,buffer)}return buffer.join(formatting?this.newLine:"")},close:function(){if(this.root){clean(this.root)}this.active=this.root=this.stack=null},getDocument:window.ActiveXObject?function(){var doc=new ActiveXObject("Microsoft.XMLDOM");doc.async=false;doc.loadXML(this.flush());return doc}:function(){return(new DOMParser()).parseFromString(this.flush(),"text/xml")},destroy:function(){fnb.hyperion.XMLWriter={}}};fnb.namespace("XMLWriter",XMLWriter)})();