(function(){var tapMoveThreshold=15;var touchesStart={};function tapStart(event){fnb.hyperion.actions.touchEndEnabled=true;var touches=event.changedTouches;for(var j=0;j<touches.length;j++){touchesStart["hyperion$"+touches[j].identifier]={identifier:touches[j].identifier,screenX:touches[j].screenX,screenY:touches[j].screenY}}}function tapMove(event){var touches=event.changedTouches;for(var j=0;j<touches.length;j++){var touchInfo=touchesStart["hyperion$"+touches[j].identifier];touchInfo.distanceX=touches[j].screenX-touchInfo.screenX;touchInfo.distanceY=touches[j].screenY-touchInfo.screenY}if(Math.abs(touchInfo.distanceX)>tapMoveThreshold||Math.abs(touchInfo.distanceY)>tapMoveThreshold){fnb.hyperion.actions.touchEndEnabled=false}}function actions(){}actions.prototype={autoInit:false,frameEvents:[],pageEvents:[],touchEndEnabled:true,addEvents:function(eventsArray){for(var i=0;i<eventsArray.length;i++){var event=(eventsArray[i].mobileEvents)?(eventsArray[i].mobileEvents==="none")?eventsArray[i].events:eventsArray[i].mobileEvents:(eventsArray[i].events==="click"&&fnb.hyperion.controller.isMobile)?"tap":eventsArray[i].events;var listener=(typeof eventsArray[i].listener!="undefined")?(typeof eventsArray[i].listener=="string")?fnb.hyperion.$(eventsArray[i].listener).elem:(eventsArray[i].listener.elem)?eventsArray[i].listener.elem:eventsArray[i].listener:document;if(eventsArray[i].focusOutEvent){fnb.hyperion.controller.attachFocusOutEvent({target:listener,handler:eventsArray[i].focusOutEvent})}var type=(eventsArray[i].type)?eventsArray[i].type:"page";if(!eventsArray[i].handler){return}if(event=="tap"){event="touchend"}var wrapperFunction=(typeof eventsArray[i].handler!="function")?(eventsArray[i].preventDefault==true)?new Function("event","event.preventDefault();"+eventsArray[i].handler):new Function("event",eventsArray[i].handler):eventsArray[i].handler;eventsArray[i].handler=wrapperFunction;switch(type){case"frame":this.frameEvents.push(eventsArray[i]);switch(eventsArray[i].selector){case undefined:fnb.hyperion.delegate.on(listener,event,wrapperFunction);break;default:fnb.hyperion.delegate.on(listener,event,eventsArray[i].selector,wrapperFunction);break}break;case"page":case undefined:this.pageEvents.push(eventsArray[i]);switch(eventsArray[i].selector){case undefined:fnb.hyperion.delegate.on(listener,event,wrapperFunction);break;default:fnb.hyperion.delegate.on(listener,event,eventsArray[i].selector,wrapperFunction);break}break;default:}}},removeEventsArray:function(eventsArray){var isTap=false;for(var i=0;i<eventsArray.length;i++){var listener=(typeof eventsArray[i].listener!="undefined")?(typeof eventsArray[i].listener=="string")?fnb.hyperion.$(eventsArray[i].listener).elem:(eventsArray[i].listener.elem)?eventsArray[i].listener.elem:eventsArray[i].listener:document;var event=(eventsArray[i].mobileEvents)?(eventsArray[i].mobileEvents==="none")?eventsArray[i].events:eventsArray[i].mobileEvents:(eventsArray[i].events==="click"&&fnb.hyperion.controller.isMobile)?"tap":eventsArray[i].events;if(event=="tap"){event="touchend";eventsArray[i].handler=new Function("event","if(fnb.hyperion.actions.touchEndEnabled){"+eventsArray[i].handler+"}");isTap=true}fnb.hyperion.delegate.off(listener,event,eventsArray[i].handler,isTap)}fnb.hyperion.actions.pageEvents=[]},off:function(target,method,handler){fnb.hyperion.delegate.off(target)},clearPageEvents:function(){this.pageEvents=[]},destroy:function(){fnb.hyperion.actions={}}};fnb.namespace("actions",actions,true)})();(function(){function getDocumentHeight(){return Math.max(fnb.hyperion.controller.document.body.scrollHeight,fnb.hyperion.controller.document.documentElement.scrollHeight,fnb.hyperion.controller.document.body.offsetHeight,fnb.hyperion.controller.document.documentElement.offsetHeight,fnb.hyperion.controller.document.body.clientHeight,fnb.hyperion.controller.document.documentElement.clientHeight)}function controller(){this.isMobile="";this.window="";this.document="";this.html="";this.head;this.windowTitle;this.bodyElement="";this.overlayElement="";this.datePickerElement="";this.datePickerDropdown="";this.actionMenuButton="";this.eziElement="";this.eziPageContentElement="";this.pageContentContainerElement="";this.pageContentElement="";this.footerContainer="";this.footerButtonGroup="";this.eziFooterButtonGroup="";this.errorElement="";this.subTabWrapper="";this.timeOutElement="";this.printDiv="";this.header="";this.loadObj;this.IE="",this.versionIE=""}controller.prototype={autoInit:false,intervals:[],resizeFunctions:[],breakPointFunctions:[],pageTemplates:[],elementFocusOutEvents:[],page:[],siteBreakPosition:0,siteBreakPoints:[1280,950,480],currentActiveElement:"",touchMoving:false,init:function(){this.isMobile=(fnbIsMobile)?(fnbIsMobile=="false")?false:true:false;this.initialSelections();fnb.hyperion.progress.init();this.initModules();this.doSweep();this.resize();if(typeof topMenuUrl!="undefined"){var loadObj={url:topMenuUrl,target:fnb.hyperion.controller.header,postLoadingCallback:fnb.hyperion.controller.loadHomePage}}this.detectIE();fnb.hyperion.controller.raiseEvent("loadSite",loadObj)},loadHomePage:function(){fnb.hyperion.controller.raiseEvent("loadHome",{url:defaultUrl})},initBrowserExtentions:function(){},initialSelections:function(){this.document=document;this.window=window;this.html=fnb.hyperion.$("=html");this.windowTitle=fnb.hyperion.$("=title");this.head=fnb.hyperion.$("=head");this.bodyElement=fnb.hyperion.$("#bodyContainer");this.overlayElement=fnb.hyperion.$("#loaderOverlay");this.datePickerElement=fnb.hyperion.$("#dateOverlay");this.datePickerDropdown=fnb.hyperion.$("#datePickerDropdown");this.eziElement=fnb.hyperion.$("#eziOverlay");this.eziPageContentElement=this.eziElement.find(".eziInnerTwo");this.pageContentContainerElement=fnb.hyperion.$("#pageContentWrapper");this.pageContentElement=fnb.hyperion.$("#pageContent");this.footerContainer=fnb.hyperion.$("#footerContainer");this.footerButtonGroup=fnb.hyperion.$("#footerButtonsContainer");this.eziFooterButtonGroup=fnb.hyperion.$("#eziFooterButtonsContainer");this.errorElement=fnb.hyperion.$("#error");this.notificationsElement=fnb.hyperion.$("#notifications");this.actioMenuButton=fnb.hyperion.$("#actionMenuBtt");this.subTabWrapper=fnb.hyperion.$("#subMenu");this.actioMenuButtonLabelWrapper=fnb.hyperion.$("#actionMenuBttLabelWrapper");this.timeOutElement=fnb.hyperion.$("#timeOut");this.printDiv=fnb.hyperion.$("#hiddenPrintDiv");this.header=fnb.hyperion.$("#header")},initModules:function(){this.attachPreConfiguredEvents();var i=0;for(var module in fnb.hyperion){i++;if(fnb.hyperion[module].autoInit){fnb.hyperion[module].init()}}this.checkLoadObjSettings()},initHtmlTemplates:function(loadObj){var htmlTemplatesList=(loadObj)?loadObj.appendTemplates:null;if(!htmlTemplatesList){htmlTemplatesList=this.pageTemplates}if(htmlTemplatesList.length>0){for(var i=0;i<htmlTemplatesList.length;i++){fnb.hyperion.utils.templates.addTemplate(htmlTemplatesList[i])}}},initPageEvents:function(){fnb.hyperion.ready(function(){fnb.hyperion.events.raiseEvent("initPageEvents")})},initPageObjects:function(){for(var pageObjects in this.page){if(this.page.hasOwnProperty(pageObjects)){if(this.page[pageObjects]){if(!this.page[pageObjects].isInitialized&&this.page[pageObjects].actions){fnb.hyperion.actions.addEvents(this.page[pageObjects].actions)}if(!this.page[pageObjects].isInitialized&&this.page[pageObjects].init){this.page[pageObjects].init();this.page[pageObjects].isInitialized=true}}}}},clearPageObjects:function(){for(var pageObjects in this.page){this.page[pageObjects]=undefined}this.clearPageEventsArray()},getHtmlTemplate:function(obj){return fnb.hyperion.utils.templates.getTemplate(obj)},clearHtmlTemplates:function(loadObj){var htmlTemplatesList=(loadObj)?loadObj.discardTemplates:[];if(!htmlTemplatesList){htmlTemplatesList=this.pageTemplates}if(htmlTemplatesList.length>0){for(var i=0;i<htmlTemplatesList.length;i++){fnb.hyperion.utils.templates.clearTarget(htmlTemplatesList[i].templateTarget)}}this.clearPageTemplatesArray()},clearPageTemplatesArray:function(){this.pageTemplates=[]},checkLoadObjSettings:function(loadObj){var loadObject=(loadObj)?loadObj:{initHtmlTemplates:true,initPageEvents:true,initPage:true};if(loadObject.initHtmlTemplates==true){this.initHtmlTemplates(loadObject)}if(loadObject.initPageEvents==true){this.initPageEvents()}if(loadObject.initPage==true){this.initPageObjects()}},attachPreConfiguredEvents:function(){if(fnb.hyperion.appTemplates){for(var key in fnb.hyperion.appTemplates){if(fnb.hyperion.appTemplates.hasOwnProperty(key)){fnb.hyperion.eventTemplates[key]=fnb.hyperion.appTemplates[key]}}}var preConfiguredEventList=fnb.hyperion.eventTemplates;var configuredEventList={};for(var key in preConfiguredEventList){if(preConfiguredEventList.hasOwnProperty(key)){configuredEventList[key]=preConfiguredEventList[key];var functionRefs=[];for(var i=0;i<configuredEventList[key].length;i++){var subObject=configuredEventList[key][i];var params=[];for(var prop in subObject){if(subObject.hasOwnProperty(prop)){params.push(subObject[prop].toString())}}var func=new Function((params[1])?params[1]:"",params[0]);functionRefs.push(func)}configuredEventList[key]=functionRefs}}fnb.hyperion.events.eventList=configuredEventList},attachActionEvents:function(events){fnb.hyperion.actions.addEvents(events)},clearActionEvents:function(listener){fnb.hyperion.actions.off(listener)},attachFocusOutEvent:function(event){this.elementFocusOutEvents.push(event)},clearFocusOutEvents:function(){this.elementFocusOutEvents=[]},clearPageEventsArray:function(){fnb.hyperion.actions.removeEventsArray(fnb.hyperion.actions.pageEvents)},attachEvent:function(event,handler,args){fnb.hyperion.events.attachEvent(sender,eventArgs)},detachEvent:function(sender,eventArgs){fnb.hyperion.events.detachEvent(sender,eventArgs)},attachPageEvent:function(handler){fnb.hyperion.events.attachEvent("initPageEvents",handler,"event")},raiseEvent:function(sender,loadObj){console.log("Hyperion Raise Event: "+sender);var loadObject=(loadObj)?loadObj:{};fnb.hyperion.events.raiseEvent(sender,loadObject)},executeCallback:function(callback,loadObj){fnb.hyperion.functions.callback.call(callback,loadObj)},DOMevent:function(target,event){if(target!=this.currentActiveElement){this.focusOut(target,event)}this.currentActiveElement=target},focusOut:function(target,event){for(var i=this.elementFocusOutEvents.length-1;i>=0;i--){if(this.elementFocusOutEvents[i].target!=target){var eventDummy={currentTarget:target,event:event};var func=new Function("event",this.elementFocusOutEvents[i].handler);func(eventDummy)}}},redirect:function(loadObj){var url=loadObj.url?loadObj.url:loadObj;window.location=url},ajax:function(ajaxFunction,sender,loadObj){var functions=ajaxFunction.split(".");if(fnb.hyperion.functions.ajax[functions[0]]){if(fnb.hyperion.functions.ajax[functions[0]][functions[1]]){fnb.hyperion.functions.ajax[functions[0]][functions[1]](sender,loadObj)}else{console.log("Controller Error: ajax: "+functions[0]+" doesnt have a method "+functions[1])}}else{console.log("Controller Error: ajax: Function does not exist. "+functions[0])}},serialize:function(target){return fnb.hyperion.serialize.get(target)},getAjaxLoadDefaults:function(loadObj){loadObj.type=(typeof loadObj.type=="undefined")?loadObj.type="POST":(typeof loadObj.type!="boolean")?loadObj.type="POST":loadObj.type;loadObj.complete=(typeof loadObj.complete=="undefined")?loadObj.complete=false:(typeof loadObj.complete!="boolean")?loadObj.complete=false:loadObj.complete;loadObj.beforeSend=(typeof loadObj.beforeSend=="undefined")?loadObj.beforeSend=false:(typeof loadObj.beforeSend!="boolean")?loadObj.beforeSend=false:loadObj.beforeSend;loadObj.success=(typeof loadObj.success=="undefined")?loadObj.success=true:(typeof loadObj.success!="boolean")?loadObj.success=true:loadObj.success;loadObj.target=(typeof loadObj.target=="undefined")?loadObj.target=this.pageContentElement:(loadObj.target=="")?loadObj.target=this.pageContentElement:loadObj.target;loadObj.urlTarget=(typeof loadObj.urlTarget=="undefined")?loadObj.urlTarget="div[id='pageContent']":(loadObj.urlTarget=="")?loadObj.urlTarget="div[id='pageContent']":loadObj.urlTarget;loadObj.error=(typeof loadObj.error=="undefined")?loadObj.error=true:(typeof loadObj.error!="boolean")?loadObj.error=true:loadObj.error;loadObj.initPageModules=(typeof loadObj.initPageModules=="undefined")?loadObj.initPageModules=true:(typeof loadObj.initPageModules!="boolean")?loadObj.initPageModules=true:loadObj.initPageModules;loadObj.initHtmlTemplates=(typeof loadObj.initHtmlTemplates=="undefined")?loadObj.initHtmlTemplates=true:(typeof loadObj.initHtmlTemplates!="boolean")?loadObj.initHtmlTemplates=true:loadObj.initHtmlTemplates;loadObj.initPageEvents=(typeof loadObj.initPageEvents=="undefined")?loadObj.initPageEvents=true:(typeof loadObj.initPageEvents!="boolean")?loadObj.initPageEvents=true:loadObj.initPageEvents;loadObj.initPage=(typeof loadObj.initPage=="undefined")?loadObj.initPage=true:(typeof loadObj.initPage!="boolean")?loadObj.initPage=true:loadObj.initPage;loadObj.history=(typeof loadObj.history=="undefined")?loadObj.history=false:(typeof loadObj.history!="boolean")?loadObj.history=true:loadObj.history;this.loadObj=loadObj;return loadObj},detectIE:function(){var IE=false,version=0;if(document.documentMode){this.IE=IE=true;this.versionIE=version=document.documentMode}else{for(var i=7;i>4;i--){var div=document.createElement("div");div.innerHTML="<!--[if IE "+i+"]><span></span><![endif]-->";if(div.getElementsByTagName("span").length){div=null;this.IE=IE=true;this.versionIE=version=i}}}if(!IE&&version==0){this.IE=false;this.versionIE=0}},doSweep:function(){fnb.hyperion.sweeper.sweep()},getScrollPosition:function(element){fnb.hyperion.functions.scrollTo.getPosition(element)},setScrollPosition:function(element){fnb.hyperion.functions.scrollTo.setPosition(element)},scrollTo:function(xPos,yPos){window.scrollTo(xPos,yPos)},isReady:function(element,handler){fnb.hyperion.functions.isReady.wait(element,handler)},getBreakPosition:function(windowWidth){var currentPosition=0;for(var i=0;i<this.siteBreakPoints.length;i++){if(windowWidth>this.siteBreakPoints[i]){currentPosition=i;return currentPosition}}return this.siteBreakPoints.length},addNotifyBreakPointChangedFunction:function(handler){this.breakPointFunctions.push(handler)},notifyBreakPointChanged:function(width){var currentPosition=this.getBreakPosition(width);if(currentPosition<this.siteBreakPosition||currentPosition>this.siteBreakPosition){this.siteBreakPosition=currentPosition;for(var index=0;index<this.breakPointFunctions.length;++index){this.breakPointFunctions[index](this.siteBreakPosition)}}},addResizeFunction:function(handler,params){this.resizeFunctions.push({"handler":handler,"params":params})},resize:function(){var width=this.window.innerWidth||this.document.documentElement.clientWidth;this.notifyBreakPointChanged(width);for(var index=0;index<this.resizeFunctions.length;++index){this.resizeFunctions[index]["handler"](width,this.getBreakPosition(width),this.resizeFunctions[index]["params"])}},error:function(message,sender){var prefix=(fnb.hyperion.utils.eziPanel.active)?"Ezi":"";fnb.hyperion.controller.raiseEvent(prefix+"Error",message);fnb.hyperion.controller.raiseEvent(prefix+sender+"Error",message)},otp:function(message,sender){var intoEzi=fnb.hyperion.utils.eziPanel.active;fnb.hyperion.controller.raiseEvent((intoEzi==true)?"loadIntoEzi":"loadEzi",{url:"/banking/Controller?nav=navigator.otp.OtpLanding&ezi="+intoEzi,initHtmlTemplates:false})},validateXHR:function(ajaxXHR,callback,sender){var valid=fnb.hyperion.functions.validateXHR.validate(ajaxXHR,callback,sender);if(!valid){fnb.hyperion.controller.checkEziState(sender)}return valid},validResponse:function(loadObj){var valid=fnb.hyperion.utils.ajax.validResponse.test(loadObj);if(!valid){fnb.hyperion.controller.checkEziState(loadObj.event)}return valid},checkEziState:function(sender){if(sender=="loadEzi"){fnb.hyperion.controller.raiseEvent("hideEzi")}},updateUrl:function(loadObj,params){if(fnb.hyperion.pushState){if(fnb.hyperion.pushState.enableHash||fnb.hyperion.pushState.enabled){fnb.hyperion.pushState.push(loadObj,params)}}},destroyAjax:function(){fnb.hyperion.ajax.stop("Controller")},clipOverflow:function(val){if(val){fnb.hyperion.controller.bodyElement.addClass("HbodyClipOverflow");fnb.hyperion.controller.html.addClass("HclipOverflow")}else{fnb.hyperion.controller.bodyElement.removeClass("HbodyClipOverflow");fnb.hyperion.controller.html.removeClass("HclipOverflow")}},is:function(obj){return(typeof obj!="undefined")?(obj)?true:false:false},extendPage:function(pageExtentions){if(!pageExtentions.functionReference){console.error("Controller Error: extendPage: No function reference added.");return}if(this.page[pageExtentions.functionReference]){console.info("Controller extendPage: Function reference already exists. Checking if the reinit flag is set...");var doReInit=(this.page[pageExtentions.functionReference].reInit)?(this.page[pageExtentions.functionReference].reInit==true)?true:false:false;if(doReInit){setTimeout(function(){fnb.hyperion.controller.page[pageExtentions.functionReference].init()},100)}return}try{var tempObject=new fnb.hyperion.page();for(var method in pageExtentions){tempObject[method]=pageExtentions[method];if(debug&&typeof pageExtentions[method]=="function"&&!document.attachEvent){fnb.hyperion.audit.test(pageExtentions[method])}}tempObject["isInitialized"]=false;this.page[pageExtentions.functionReference]=tempObject;this.page[pageExtentions.functionReference].pageData=(fnb.hyperion.load.includesData[pageExtentions.functionReference])?fnb.hyperion.load.includesData[pageExtentions.functionReference][0]:[]}catch(e){console.error("Controller Error: extendPage: "+e)}},enableTopMenu:function(){fnb.hyperion.utils.topTabs.enable()},disbaleTopMenu:function(){fnb.hyperion.utils.topTabs.disable()},openWindow:function(link){var url=(typeof link=="object")?link.url:link;window.open(url)}};fnb.namespace("controller",controller,true);fnb.hyperion.$=fnb.hyperion.selector;fnb.hyperion.getDocumentHeight=getDocumentHeight})();(function(){function events(sender){this._sender=sender}events.prototype={autoInit:false,eventList:{},getEvent:function(eventName,create){if(!this.eventList[eventName]){if(!create){return null}this.eventList[eventName]=[]}return this.eventList[eventName]},attachEvent:function(eventName,handler,args){var evt=this.getEvent(eventName,true);var func;switch(typeof(handler)){case"function":func=handler;break;default:func=new Function(args,handler)}evt.push(func)},insertEvent:function(eventName,handler,args,position){var evt=this.getEvent(eventName,true);var func;switch(typeof(handler)){case"function":func=handler;break;default:func=new Function(args,handler)}if(!position){position=evt.length}evt.splice(position,0,func)},detachEvent:function(eventName,handler){var evt=this.getEvent(eventName);if(!evt){return}var getArrayIndex=function(array,item){for(var i=0;i<array.length;i++){if(array[i]&&array[i]===item){return i}}return -1};var index=getArrayIndex(evt,handler);if(index>-1){evt.splice(index,1)}},raiseEvent:function(eventName,eventArgs){if(typeof(this.getEventHandler(eventName))!="undefined"){if(this.getEventHandler(eventName)){this.getEventHandler(eventName)(eventName,eventArgs)}}},getEventHandler:function(eventName){var evt=this.getEvent(eventName,false);if(!evt||evt.length===0){return null}var _handler=function(sender,args){for(var i=0;i<evt.length;i++){evt[i](sender,args)}};return _handler}};fnb.namespace("events",events,true)})();(function(){function page(){}page.prototype={destroy:function(){fnb.hyperion.page={}}};fnb.namespace("page",page)})();(function(){function sweeper(){}sweeper.prototype={autoInit:false,sweep:function(){for(var x in window){try{if(typeof window[x]==="function"&&window[x].toString().indexOf("[native code]")==-1&&window[x].toString().search(/fnb.hyperion./i)==-1){console.log("Non namespaced function found=>> "+x.toString())}}catch(e){console.log(e);console.log(window[x].toString())}}}};fnb.namespace("sweeper",sweeper,true)})();