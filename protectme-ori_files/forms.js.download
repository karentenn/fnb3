(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"onsubmit, submit",selector:'[data-role="form"]',handler:"return fnb.hyperion.forms.submitForm(event);",preventDefault:true}];fnb.hyperion.controller.attachActionEvents(events)}function initModules(){for(var module in fnb.hyperion.forms){if(fnb.hyperion.forms[module].autoInit){fnb.hyperion.forms[module].init()}}}function trim(value){return value.replace(/^\s+|\s+$/,"")}function forms(){}forms.prototype={autoInit:true,init:function(){console.log("Forms init");initModules();bindEvents()},submitForm:function(event){var form=fnb.hyperion.$(event.currentTarget);if(form.action!=""){fnb.hyperion.forms.validateAndSubmitForm({url:form.prop("action"),dataTarget:"#"+form.prop("action")})}},validateAndSubmitForm:function(loadObj){if(loadObj.dataTarget){validForm=true;fnb.hyperion.$(loadObj.dataTarget).find('*[data-required="true"]').each(function(element){var checked=false;var validationTarget=element.find(".validationTarget");var targetValue="";if(validationTarget.length()>0){if(validationTarget.length()==1){targetValue=validationTarget.val();checked=true}else{if(validationTarget.length()>1){validationTarget.each(function(element){if(element.attr("checked")=="true"||element.attr("checked")=="checked"){checked=true;targetValue=element.val().toString()}})}}var validationErrorTarget=element.find(".formInlineError");if(targetValue==null||targetValue==""||targetValue==0||checked==false){element.addClass("inputError");validForm=false}else{if(validationTarget.attr("data-type")=="email"){var message=fnb.hyperion.forms.validateEmail(validationTarget);if(message!=""){element.addClass("inputError");validForm=false;validationErrorTarget.html(message)}else{element.removeClass("inputError")}}else{element.removeClass("inputError")}}}});if(validForm){fnb.hyperion.controller.raiseEvent("submit",loadObj)}}},clearAndSubmitForm:function(loadObj){fnb.hyperion.$("#command").attr("value","DEFAULT");fnb.hyperion.controller.raiseEvent("submit",loadObj)},validateEmail:function(input){var error="";var timmedValue=trim(input.val());var emailFilter=/^[^@]+@[^@.]+\.[^@]*\w\w$/;var illegalChars=/[\(\)\<\>\,\;\:\\\"\[\]]/;if(!emailFilter.test(timmedValue)){error="Please enter a valid email address."}else{if(input.val().match(illegalChars)){error="The email address contains illegal characters."}}return error},destroy:function(){fnb.hyperion.forms={}}};fnb.namespace("forms",forms,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"click",selector:".catAccHeadingWrapper",handler:"fnb.hyperion.forms.accordion.handleOpenClose(event);"},{type:"frame",listener:document,events:"click",selector:".accGroupItemWrapper.SalesAcc .accGroupItemHeader",handler:"fnb.hyperion.forms.accordion.handleOpenClose(event);"}];fnb.hyperion.controller.attachActionEvents(events)}function accordion(){}accordion.prototype={autoInit:true,closetype:"",currentGroup:"",accType:"",init:function(){console.log("Forms Accordion init");bindEvents()},handleOpenClose:function(event){element=fnb.hyperion.$(event.currentTarget).parent();elementOpenStatus=element.attr("data-state");element=fnb.hyperion.$(event.currentTarget).parent();elementOpenStatus=element.attr("data-state");if(this.closetype=="closeAll"&&elementOpenStatus!="open"){this.closeAll()}this.toggleOpenClose(element)},toggleOpenClose:function(element){var groupContentWrapperEl=element.find("! .accGroupItemContentWrapper"),accType=groupContentWrapperEl.attr("data-accType"),accArrowEl=element.find("! .accArrow"),arrowIsUp=accArrowEl.hasClass("accArrow-up"),arrowIsDown=accArrowEl.hasClass("accArrow-down"),hasShowClassResult=groupContentWrapperEl.hasClass("accShow");if(accType=="catalogAcc"){accDescEl=element.find("! span.catAccDesc")}if(hasShowClassResult){element.attr("data-state","closed");if(accType=="catalogAcc"){accDescEl.text("View Device Specs")}groupContentWrapperEl.removeClass("accShow");if(!arrowIsDown){accArrowEl.addClass("accArrow-down")}if(arrowIsUp){accArrowEl.removeClass("accArrow-up")}}else{element.attr("data-state","open");if(accType=="catalogAcc"){accDescEl.text("Close Device Specs")}groupContentWrapperEl.addClass("accShow");if(arrowIsDown){accArrowEl.removeClass("accArrow-down")}if(!arrowIsUp){accArrowEl.addClass("accArrow-up")}}},closeAll:function(){_this=fnb.hyperion.forms.accordion;var elements=_this.currentGroup.find('* .accGroupItemWrapper[data-state="open"]');if(elements.length()>0){elements.each(function(element,index){_this.toggleOpenClose(element)})}},destroy:function(){fnb.hyperion.forms.accordion={}}};fnb.namespace("forms.accordion",accordion,true)})();(function(){function initModules(){for(var module in fnb.hyperion.forms.button){if(fnb.hyperion.forms.button[module].autoInit){fnb.hyperion.forms.button[module].init()}}}function button(){}button.prototype={autoInit:true,init:function(){console.log("Forms Main Button init");initModules()},destroy:function(){fnb.hyperion.forms={}}};fnb.namespace("forms.button",button,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"click",selector:".checkBox",handler:"fnb.hyperion.forms.checkBox.checkState(event);"}];fnb.hyperion.controller.attachActionEvents(events)}function checkBox(){}checkBox.prototype={autoInit:true,init:function(){console.log("Forms Checkbox init");bindEvents()},checkState:function(event){var target=fnb.hyperion.$(event.currentTarget);var checkBoxState=target.hasClass("checked");var idDisabled=(target.attr("data-disabled"))?(target.attr("data-disabled")=="true")?true:false:false;if(!idDisabled){switch(checkBoxState){case true:this.setUnChecked(target);break;default:this.setChecked(target);break}}},setChecked:function(target){target.addClass("checked");target.children(0).attr("checked","checked")},setUnChecked:function(target){target.removeClass("checked");target.children(0).attr("checked","")},setDisabled:function(target){target.attr("data-state","disabled")},getValue:function(element){var getVal=element.hasClass("checked");return getVal},setValue:function(element,value){switch(value){case"checked":this.setChecked(element);break;default:this.setChecked(target);break}},destroy:function(){fnb.hyperion.forms.checkBox={}}};fnb.namespace("forms.checkBox",checkBox,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"click",selector:"#datePicker",handler:'fnb.hyperion.controller.raiseEvent("showDatePicker",{event:event});'},{type:"frame",listener:document,events:"click",selector:".dateLeftScrollArrow",handler:"fnb.hyperion.forms.datePicker.datePickerScrollLeft();"},{type:"frame",listener:document,events:"click",selector:".dateRightScrollArrow",handler:"fnb.hyperion.forms.datePicker.datePickerScrollRight();"},{type:"frame",listener:document,events:"click",selector:".datePickerClose",handler:'fnb.hyperion.controller.raiseEvent("hideDatePicker",{event:event});'},{type:"frame",listener:document,events:"click",selector:'.datePickerScrollerWrapper [data-active="true"]',handler:"fnb.hyperion.forms.datePicker.select(event);"},{type:"frame",listener:document,events:"change",selector:"#datePickerDropdown",handler:"fnb.hyperion.forms.datePicker.dropdownSelect(event);"}];fnb.hyperion.controller.attachActionEvents(events)}function datePicker(){}datePicker.prototype={autoInit:true,active:true,datePickerTarget:"",currentDatePickerDate:"",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthDays:[31,28,31,30,31,30,31,31,30,31,30,31],today:new Date(),totalMonths:9,datePickerValueTarget:"",dateScroller:"",datePickerWrapper:"",datePickerScrollerWrapper:"",datePickerScroller:"",breakPoints:[2,1,1],datePickerBreakpointValue:-2,monthCount:0,init:function(){console.log("Forms Datepicker init");this.datePickerWrapper=fnb.hyperion.controller.datePickerElement.find(".datePickerContainer");this.datePickerScrollerWrapper=this.datePickerWrapper.find(".datePickerScrollerWrapper");this.datePickerScroller=this.datePickerScrollerWrapper.children(0);bindEvents();fnb.hyperion.controller.addResizeFunction(this.resize)},select:function(event){this.dateScroller.end(event);if(this.dateScroller.moving==false){var target=fnb.hyperion.$(event.currentTarget);var year=target.attr("data-year");var month=target.attr("data-month");var date=target.attr("data-date");var dayName=target.attr("data-dayName");var monthName=target.attr("data-monthName");var topLabelString=dayName+" "+date;var bottomLabelString=monthName+" "+year;month=(month.length<2)?0+month:month;date=(date.length<2)?0+date:date;this.datePickerValueTarget.attr("data-value",year+"-"+month+"-"+date);this.datePickerValueTarget.val(year+"-"+month+"-"+date);this.datePickerTarget.find(".datePickerLabelTop").html(topLabelString);this.datePickerTarget.find(".datePickerLabelBottom").html(bottomLabelString);fnb.hyperion.controller.raiseEvent("hideDatePicker",{})}},dropdownSelect:function(event){var target=fnb.hyperion.$(event.currentTarget);var year=target.val();var dateArray=this.currentDatePickerDate.split("-");var month=parseInt(dateArray[1]);var day=parseInt(dateArray[2]);var dateString=year+"-"+month+"-"+day;this.create(dateString)},show:function(obj){fnb.hyperion.controller.getScrollPosition(document.body);fnb.hyperion.controller.clipOverflow(true);fnb.hyperion.controller.datePickerElement.show();this.datePickerTarget=fnb.hyperion.$(obj.event.currentTarget);this.datePickerValueTarget=this.datePickerTarget.find("=input");var date=this.datePickerValueTarget.attr("data-value");var newDatePickerReady=(fnb.hyperion.$(".datePickerScrollerWrapper").length()>0)?true:false;if(!newDatePickerReady){this.setDatePickerInner(date)}else{if(date!=this.currentDatePickerDate){this.create(date)}else{this.setCalendar();var currentIndex=this.dateScroller.currentIndex,moveBy=0;moveBy=(currentIndex>2)?currentIndex-2:2-currentIndex;for(var i=0;i<moveBy;i++){(currentIndex>2)?this.datePickerScrollLeft():this.datePickerScrollRight()}}}this.active=true},hide:function(){if(this.active){this.active=false;fnb.hyperion.controller.clipOverflow(false);fnb.hyperion.controller.datePickerElement.hide();fnb.hyperion.controller.setScrollPosition(document.body)}},create:function(date){var dateArray=date.split("-");var year=parseInt(dateArray[0]);var month=parseInt(dateArray[1]);var day=parseInt(dateArray[2]);fnb.hyperion.controller.datePickerDropdown.val(year);this.monthCount=parseInt(this.datePickerTarget.attr("data-months"));var startBefore=this.datePickerTarget.attr("data-startBefore");this.currentDatePickerDate=date;this.setCalendar(this.getCalendar(year,month,day,this.monthCount,startBefore));this.dateScroller=new fnb.hyperion.horizontalScroller();this.dateScroller.scrollableParent=this.datePickerScroller;this.dateScroller.scrollerChildren=".datePickerMonthWrapper";if(fnb.hyperion.controller.IE){this.dateScroller.scrollStopWidth=50;this.dateScroller.scrollSpeed=75;this.dateScroller.moveTreshold=0.1}else{this.dateScroller.scrollStopWidth=200;this.dateScroller.scrollSpeed=5;this.dateScroller.moveTreshold=0.2}this.dateScroller.bindEvents();this.dateScroller.enabled=true;this.dateScroller.afterStop=this.checkCalendarPosition;this.datePickerBreakpointValue=-2;var windowWidth=fnb.hyperion.controller.window.innerWidth||fnb.hyperion.controller.document.documentElement.clientWidth;this.adjustDatePicker(windowWidth,fnb.hyperion.controller.getBreakPosition(windowWidth))},getCalendar:function(year,month,day,monthCount,startBefore){year=parseInt(year);month=parseInt(month);day=parseInt(day);var currentMonth=month;var currentYear=year;if(startBefore>0){var startInt=currentMonth-startBefore;if(startInt<1){currentMonth=12-Math.abs(startInt);currentYear--}else{currentMonth=startInt}}var calendarData=[];for(var i=0;i<monthCount;i++){var currentMonthIndex=currentMonth-1;var monthData={templateName:"datePickerMonthWrapper",templateData:{}};var currentMonthDaysIncrement=1;var firstDay=new Date(currentYear,currentMonthIndex,1);var startDay=firstDay.getDay();if(currentYear%4==0){this.monthDays[1]=29}else{this.monthDays[1]=28}var daysInMonth=this.monthDays[currentMonthIndex];monthData.templateData.monthName=this.monthNames[currentMonthIndex];monthData.templateData.month=currentMonth;monthData.templateData.year=currentYear;monthData.templateData.count=i;var startFlag=false;var rowsData="";var monthName=this.shortMonthNames[currentMonthIndex];for(var j=0;j<6;j++){var rowData=[];for(var k=0;k<7;k++){var itemData={templateName:"datePickerItem",templateData:{}};if(currentMonthDaysIncrement>daysInMonth){startFlag=false}else{if(k>=startDay&&!startFlag){startFlag=true}}var selectedVal=false;var dateVal="&nbsp;";var monthVal="";var yearVal="";var activeVal=false;if(startFlag){dateVal=currentMonthDaysIncrement;monthVal=currentMonth;yearVal=currentYear;activeVal=true;currentMonthDaysIncrement++}if(dateVal==day&&monthVal==month&&yearVal==year){selectedVal=true}itemData.templateData.dataSelected=selectedVal;itemData.templateData.dayName=this.weekDays[k];itemData.templateData.monthName=monthName;itemData.templateData.date=dateVal;itemData.templateData.month=monthVal;itemData.templateData.year=yearVal;itemData.templateData.dataActive=activeVal;rowData.push(itemData)}rowsData+="<tr>"+fnb.hyperion.controller.getHtmlTemplate(rowData)+"</tr>"}monthData.templateData.rows=rowsData;calendarData.push(monthData);currentMonth++;if((currentMonth-1)>=12){currentMonth=1;currentYear++}}return fnb.hyperion.controller.getHtmlTemplate(calendarData)},setDatePickerInner:function(date){var html=fnb.hyperion.htmlTemplates["datePickerInnerContent"];var datePickerInnerDiv=fnb.hyperion.$(".datePickerInner");if(html){datePickerInnerDiv.html(html)}this.datePickerWrapper=fnb.hyperion.controller.datePickerElement.find(".datePickerContainer");this.datePickerScrollerWrapper=this.datePickerWrapper.find(".datePickerScrollerWrapper");this.datePickerScroller=this.datePickerScrollerWrapper.children(0);this.create(date)},setCalendar:function(html){this.datePickerWrapper.show();if(html){this.datePickerScroller.html(html)}},checkCalendarPosition:function(){var child;var month="";var year="";if(fnb.hyperion.forms.datePicker.dateScroller.currentIndex==fnb.hyperion.forms.datePicker.dateScroller.maxStops){child=fnb.hyperion.forms.datePicker.datePickerScroller.children[fnb.hyperion.forms.datePicker.datePickerScroller.children().length()-1];month=parseInt(child.attr("data-month"));year=parseInt(child.attr("data-year"));month++;if(month>12){month=1;year++}var newMonths=fnb.hyperion.forms.datePicker.getCalendar(year,month,"",fnb.hyperion.forms.datePicker.datePickerBreakpointValue,0);var newNode=document.createElement("div");newNode.html(newMonths);var i=fnb.hyperion.forms.datePicker.datePickerBreakpointValue;while(i--){fnb.hyperion.forms.datePicker.removeCalendar(fnb.hyperion.forms.datePicker.datePickerScroller.children[0]);fnb.hyperion.forms.datePicker.appendCalendar(newNode.children[0])}fnb.hyperion.horizontalScroller.slide(fnb.hyperion.forms.datePicker.dateScroller.scrollableParent).stop();fnb.hyperion.forms.datePicker.dateScroller.centerIndex(fnb.hyperion.forms.datePicker.dateScroller.maxStops-1)}else{if(fnb.hyperion.forms.datePicker.dateScroller.currentIndex==0){child=fnb.hyperion.forms.datePicker.datePickerScroller.children(0);month=parseInt(child.attr("data-month"));year=parseInt(child.attr("data-year"));if(month==0){month=12;year--}var newMonths=fnb.hyperion.forms.datePicker.getCalendar(year,month,"",fnb.hyperion.forms.datePicker.datePickerBreakpointValue,fnb.hyperion.forms.datePicker.datePickerBreakpointValue);var newNode=document.createElement("div");newNode.innerHTML=newMonths;var i=fnb.hyperion.forms.datePicker.datePickerBreakpointValue;while(i--){fnb.hyperion.forms.datePicker.removeCalendar(fnb.hyperion.forms.datePicker.datePickerScroller.children(fnb.hyperion.forms.datePicker.datePickerScroller.children().length()-1));fnb.hyperion.forms.datePicker.prependCalendar(newNode.children[i],fnb.hyperion.forms.datePicker.datePickerScroller.children(0))}fnb.hyperion.horizontalScroller.slide(fnb.hyperion.forms.datePicker.dateScroller.scrollableParent).stop();fnb.hyperion.forms.datePicker.dateScroller.centerIndex(1)}}},appendCalendar:function(html){this.datePickerScroller.add(html)},prependCalendar:function(html,child){this.datePickerScroller.elem.insertBefore(html,child.elem)},removeCalendar:function(child){this.datePickerScroller.remove(child.elem)},adjustDatePicker:function(windowSize,breakpoint){var breakPointIndex=(breakpoint-1<0)?0:breakpoint-1;var currentBreakPointValue=this.breakPoints[breakPointIndex];var currentContainerWidth=this.datePickerScrollerWrapper.outerWidth();var newMonthWidth=currentContainerWidth/currentBreakPointValue;var newScrollingWrapperWidth=newMonthWidth*this.monthCount;newScrollingWrapperWidth=newScrollingWrapperWidth+(this.monthCount/2);this.datePickerScroller.css("width",newScrollingWrapperWidth+"px");this.dateScroller.scrollStopWidth=currentContainerWidth;if(this.breakPoints[breakPointIndex]!=this.datePickerBreakpointValue){this.datePickerBreakpointValue=this.breakPoints[breakPointIndex];this.dateScroller.maxStops=(this.monthCount/this.datePickerBreakpointValue)-1;var movePos=2;if(this.datePickerBreakpointValue==1){movePos=8}this.dateScroller.currentIndex=movePos;var leftPos=-currentContainerWidth*movePos;this.datePickerScroller.css("left",leftPos+"px");this.dateScroller.x=leftPos}},datePickerScrollRight:function(){this.dateScroller.next()},datePickerScrollLeft:function(){this.dateScroller.previous()},resize:function(windowSize,breakpoint){if(fnb.hyperion.forms.datePicker.active){fnb.hyperion.forms.datePicker.adjustDatePicker(windowSize,breakpoint)}},destroy:function(){fnb.hyperion.forms.datePicker={}}};fnb.namespace("forms.datePicker",datePicker,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"click",selector:".dropdownSelected",handler:"fnb.hyperion.forms.dropDown.checkState(event);",focusOutEvent:"fnb.hyperion.forms.dropDown.close(event);"},{type:"frame",listener:document,events:"click",selector:".dropdownItem",handler:"fnb.hyperion.forms.dropDown.select(event);"},{type:"frame",listener:document,events:"click",selector:".dropdownCarat",handler:"fnb.hyperion.forms.dropDown.checkState(event);"},{type:"frame",listener:document,events:"change",selector:".dropdownItemSelectWrapper",handler:"fnb.hyperion.forms.dropDown.select(event);"},{type:"frame",listener:document,events:"keyup",selector:".dropdownInput",handler:"fnb.hyperion.forms.dropDown.filter(event);"},{type:"frame",listener:document,events:"click",selector:".dropdownInput",handler:"fnb.hyperion.forms.dropDown.dropdownInputFocusIn(event);"}];fnb.hyperion.controller.attachActionEvents(events)}function dropDown(){}dropDown.prototype={autoInit:true,dropdownSelect:"",dropdownBottomOffset:78,dropdownParent:"",dropdownTarget:"",dropdownCaret:"",dataRows:"",dropdownSelectedElement:"",dropdownOptionsParent:"",dropdownOptionsParentWrapper:"",dropdownSelectedValue:"",dropdownOptions:{},activeDropdown:"",filtered:false,active:false,init:function(){console.log("Forms Dropdown init");bindEvents();fnb.hyperion.controller.attachPageEvent("fnb.hyperion.forms.dropDown.setDropdowns()","")},checkState:function(event){var tempTarget=fnb.hyperion.$(event.currentTarget);if(this.activeDropdown==""||this.activeDropdown==undefined){this.activeDropdown=fnb.hyperion.$(event.currentTarget);this.activeId=this.activeDropdown.parent().find("=select").attr("id")}else{var tempID=tempTarget.parent().find("=select").attr("id");var isCurrentActive=(tempID==this.activeId)?true:false;var activeDropdownState=(this.activeDropdown.hasClass("closed"))?"closed":"open";var activeDropdownDisabledState=(this.dropdownTarget.attr("data-disabled"))?(this.dropdownTarget.attr("data-disabled")=="true")?true:false:false;if(!activeDropdownDisabledState&&activeDropdownState=="open"&&!isCurrentActive){this.dropdownTarget=this.activeDropdown;this.close(event);this.activeDropdown=""}}this.activeDropdown=tempTarget;this.dropdownTarget=(tempTarget)?(tempTarget.hasClass("dropdownCarat"))?tempTarget.parent().find(".dropdownSelected"):tempTarget:fnb.hyperion.$(event.target);var dropdownState=(this.dropdownTarget.hasClass("closed"))?"closed":"open";var dropdownDisabledState=(this.dropdownTarget.attr("data-disabled"))?(this.dropdownTarget.attr("data-disabled")=="true")?true:false:false;this.dataRows=parseInt(this.dropdownTarget.attr("data-rows"));this.dataRows=isNaN(this.dataRows)?0:this.dataRows;if(!dropdownDisabledState){switch(dropdownState){case"open":this.close(event);break;case"closed":this.open(event);break;default:}}},open:function(){if(this.active){this.close()}this.active=true;this.dropdownParent=this.dropdownTarget.parent();this.dropdownStateTarget=this.dropdownParent.find(".dropdownSelected");this.dropdownCaret=this.dropdownParent.find(".dropdownCarat");this.dropdownOptionsParent=this.dropdownParent.find("=ul");this.dropdownSelect=this.dropdownParent.find("=select");this.activeId=this.dropdownSelect.attr("id");this.dropdownOptionsParentWrapper=this.dropdownOptionsParent.parent();this.setContentHeight();this.dropdownOptionsParentWrapper.addClass("open");this.dropdownOptionsParentWrapper.attr("data-transparent","false");this.dropdownStateTarget.removeClass("closed");this.dropdownStateTarget.addClass("open");this.dropdownCaret.removeClass("closed");this.dropdownCaret.addClass("open")},close:function(target){var isDropdownInput=false;if(target){var target=target.currentTarget;isDropdownInput=(fnb.hyperion.$(target).hasClass("dropdownInput"))?true:false}if(this.active==true&&this.dropdownOptionsParentWrapper!=""&&!isDropdownInput){this.resetDropdown()}},select:function(target){this.dropdownSelectedElement=fnb.hyperion.$(target.currentTarget);var dropdownParent=this.dropdownSelectedElement.parent().parent();switch(fnb.hyperion.controller.isMobile){case true:var htmlString="";switch(dropdownParent.attr("data-type")){case"singleTier":htmlString=this.dropdownSelectedElement.prop("options")[this.dropdownSelectedElement.prop("selectedIndex")].html();break;case"threeTier":htmlString='<span data-role="dropdownItemLabel">'+this.dropdownSelectedElement.prop("options")[this.dropdownSelectedElement.prop("selectedIndex")].parent().getAttribute("label")+'</span><span data-role="dropdownItemLabel">'+this.dropdownSelectedElement.prop("options")[this.dropdownSelectedElement.prop("selectedIndex")].html()+"</span>";break;default:}dropdownParent.parent().find("=span").get(1).html(htmlString);break;default:if(this.dropdownSelectedElement.attr("data-type")){return}this.dropdownSelectedElement.parent().find("*li").attr("data-selected","false");this.dropdownSelectedElement.parent().find("*li").show();this.dropdownSelectedElement.attr("data-selected","true");var selectedValue=this.dropdownSelectedElement.attr("data-value");this.dropdownSelect.val(selectedValue);var selectedContent=this.dropdownSelectedElement.html();this.dropdownTarget.html(selectedContent);if(dropdownParent.parent().attr("data-type")=="threeTier"){fnb.hyperion.forms.dropDown.checkForBalance(dropdownParent.parent())}fnb.hyperion.forms.dropDown.close(target)}},setContentHeight:function(){var visibleDropdownOptions=this.dropdownParent.find('*li[data-visible="true"]');var dropdownOptionsLength=isNaN(visibleDropdownOptions.length())?1:visibleDropdownOptions.length();var dropdownHeight=0;var firstDropdownHeight=visibleDropdownOptions.first().outerHeight();if(dropdownOptionsLength>this.dataRows&&this.dataRows!=0){this.dropdownOptionsParent.attr("data-scrollable","scrollable");dropdownHeight=(visibleDropdownOptions.last().outerHeight()*(this.dataRows-1))+firstDropdownHeight;this.dropdownOptionsParentWrapper.css("height",dropdownHeight+"px")}else{if(this.dataRows==0||dropdownOptionsLength<=this.dataRows){dropdownHeight=(visibleDropdownOptions.last().outerHeight()*(dropdownOptionsLength-1))+firstDropdownHeight;this.dropdownOptionsParentWrapper.css("height",dropdownHeight+"px")}}var dropdownPosition=this.dropdownParent.position();var documentHeight=fnb.hyperion.getDocumentHeight();var totalPosition=dropdownPosition.objectPosY+this.dropdownBottomOffset+dropdownHeight;if(totalPosition>documentHeight){this.dropdownOptionsParentWrapper.addClass("dropdownReverse")}},setDropdowns:function(){var pageDropdowns=fnb.hyperion.$("=select");if(pageDropdowns.length()>0){if(pageDropdowns.type()!="SELECT"){pageDropdowns.each(function(element){fnb.hyperion.forms.dropDown.checkAttributes(element)})}else{fnb.hyperion.forms.dropDown.checkAttributes(pageDropdowns)}}},checkAttributes:function(element){var dropdownParent=element.parent().parent();var dropdownParentType=dropdownParent.attr("data-type");var dropdownParentSet=dropdownParent.attr("data-set");if(dropdownParentType=="threeTier"&&dropdownParentSet!="true"){dropdownParent.attr("data-set","true");fnb.hyperion.forms.dropDown.checkForBalance(dropdownParent)}if(!fnb.hyperion.controller.isMobile){if(dropdownParent.attr("data-event")!=null){if(dropdownParent.attr("data-event")!="click"){dropdownParent.attr("data-event","click")}}}},checkForBalance:function(dropdownParent){var amountsWrapper=dropdownParent.find(".dropdownSelected").find('*[data-type="amountsWrapper"]');if(amountsWrapper.length()>0){var amountsUrl=amountsWrapper.attr("data-url");if(amountsUrl){fnb.hyperion.forms.dropDown.loadBalance(amountsWrapper,amountsUrl)}}},loadBalance:function(target,url){var loadObject={url:url,target:target,async:true};fnb.hyperion.controller.raiseEvent("asyncLoadContent",loadObject)},resetDropdown:function(){this.dropdownOptionsParentWrapper.css("height","0px");this.dropdownOptionsParentWrapper.attr("data-transparent","true");this.dropdownOptionsParentWrapper.removeClass("open");this.dropdownTarget.removeClass("open");this.dropdownTarget.addClass("closed");this.dropdownCaret.removeClass("open");this.dropdownCaret.addClass("closed");if(this.filtered){this.resetFilter()}this.active=false},filter:function(event){var dropdownOptions=this.dropdownParent.find("*li");var target=fnb.hyperion.$(event.currentTarget);target.attr("data-placeholderis","false");var searchValue=target.val().toLowerCase();dropdownOptions.each(function(element){var contentContainers=element,filterParent="";if(contentContainers.attr("data-type")!="dropdownInput"){var filterParent=false;if(contentContainers.length()>0){contentContainers.each(function(item){var content=item.html().toLowerCase();if(content.indexOf(searchValue)>-1||searchValue==""){filterParent=true}})}else{var content=contentContainers.html().toLowerCase();if(content.indexOf(searchValue)>-1||searchValue==""){filterParent=true}}}else{var filterParent=true}if(filterParent){element.show()}else{element.hide()}});this.filtered=true;this.setContentHeight()},resetFilter:function(){var dropdownOptions=this.dropdownParent.find("*li");var dropdownInput=this.dropdownParent.find(".dropdownInput");var maskValue=dropdownInput.attr("data-placeholder");dropdownInput.val(maskValue);dropdownInput.attr("data-placeholderis","true");for(var i=1;i<dropdownOptions.length;i++){var element=dropdownOptions[i];element.show()}this.filtered=false;this.setContentHeight()},dropdownInputFocusIn:function(event){var target=fnb.hyperion.$(event.currentTarget);var value=target.val();var maskValue=target.attr("data-placeholder");if(value==maskValue){target.attr("data-placeholderIs","false");target.val("")}},dropdownInputFocusOut:function(event){var target=fnb.hyperion.$(event.currentTarget);var value=target.val();var maskValue=target.attr("data-placeholder");if(value==""){target.attr("data-placeholderIs","true");target.val(maskValue)}this.resetDropdown()},getValue:function(element,handler){var value=element.val();return handler(value)},setValue:function(id,value,useIndex){var dropdown=fnb.hyperion.$(id);var selectInput=dropdown.find("* .dropdownItemSelectWrapper");var selectInputOptions=selectInput.find("=option");if(!useIndex){selectInputOptions.each(function(element,index){if(element.elem.hasAttribute("selected")){element.attr("selected","")}if(element.val()==value){element.attr("selected","true")}})}else{selectInput.elem.selectedIndex=value}var dropdownLiElements=dropdown.find("=li");var dropdownValueElment=dropdown.find(".dropdownSelected");dropdownLiElements.each(function(element,index){var dataValue=element.attr("data-value");if(!useIndex){if(element.elem.hasAttribute("data-selected")){element.attr("data-selected","")}if(dataValue==value){element.attr("data-selected","true");dropdownValueElment.html(element.html())}}else{if(useIndex){if(element.elem.hasAttribute("data-selected")){element.attr("data-selected","")}if(index==value){element.attr("data-selected","true");dropdownValueElment.html(element.attr("data-value"))}}}})},destroy:function(){fnb.hyperion.forms.dropDown={}}};fnb.namespace("forms.dropDown",dropDown,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"blur focusout focusin click keypress keyup keydown paste drop copy cut",selector:".input",handler:"fnb.hyperion.forms.input.delegate(event);"},{type:"frame",listener:document,events:"click",selector:"#passwordVisabilityHide",handler:"fnb.hyperion.validatePassword.toggelShowPassword(event);"},{type:"frame",listener:document,events:"click",selector:"#passwordVisabilityShow",handler:"fnb.hyperion.validatePassword.toggelShowPassword(event);"}];fnb.hyperion.controller.attachActionEvents(events)}function initModules(){for(var module in fnb.hyperion.forms.input){if(fnb.hyperion.forms.input[module].autoInit){fnb.hyperion.forms.input[module].init()}}}function setMask(target){var value=target.val();var maskValue=target.attr("data-placeholder");if(value==""){target.attr("data-placeholderIs","true");target.val(maskValue)}}function clearMask(target){var value=target.val();var targetType=target.attr("data-type");var maskValue=target.attr("data-placeholder");if(value==maskValue){target.attr("data-placeholderIs","false");target.val("")}else{if((value=="0"||value=="0.00")&&targetType=="number"){target.val("")}}}function validateStandardChar(event){var keyCode=event.charCode||event.keyCode||event.which;var isShift=event.shiftKey;if(isShift&&keyCode>58&&keyCode<90||fnb.hyperion.forms.input.validKeyCodes.indexOf(keyCode)>-1||fnb.hyperion.forms.input.numpad.indexOf(keyCode)>-1){return true}else{if(!isShift&&keyCode>48&&keyCode<90||fnb.hyperion.forms.input.validKeyCodes.indexOf(keyCode)>-1||fnb.hyperion.forms.input.numpad.indexOf(keyCode)>-1){return true}else{return false}}}function cancelCopyCutPaste(event){var cancelKeys=[9,13,16,17,18,19,27];var keyCode=event.charCode||event.keyCode||event.which;if(event.ctrlKey&&(keyCode==67||keyCode==86||keyCode==88)||cancelKeys.indexOf(keyCode)>-1){return false}else{return true}}function input(){}input.prototype={autoInit:true,validKeyCodes:[8,9,35,36,37,39,46],numberKeyCodes:[110,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,190],numpad:[96,97,98,99,100,101,102,103,104,105],specialCharKeyCodes:[190],ctrlDownKeyCodes:[67,86,88],init:function(){console.log("Forms Input init");bindEvents();initModules()},delegate:function(event){var validEvent=true;var eventType=event.type;var target=event.target||event.srcElement;var keyCode=event.charCode||event.keyCode||event.which;eventType=(eventType=="keyup"&&keyCode==9)?"focusin":eventType;target=fnb.hyperion.$(target);var targetType=target.attr("data-type");var rule=target.attr("data-validateRule");var createMaks=target.attr("data-createmask");var targetHasPlaceholder=target.attr("data-placeholderIs");switch(targetType){case"masked":switch(eventType){case"click":break;case"keypress":break;case"keyup":break;case"keydown":validEvent=fnb.hyperion.forms.input.number.keyDown(event);break}break;case"number":switch(eventType){case"keypress":break;case"keyup":if(createMaks){fnb.hyperion.forms.input.number.keyUp(event)}break;case"keydown":validEvent=fnb.hyperion.forms.input.number.keyDown(event);break;case"focusin":case"click":clearMask(target);break;case"blur":break}break;case"currency":switch(eventType){case"click":case"focusin":if(targetHasPlaceholder=="true"){clearMask(target)}fnb.hyperion.forms.input.currency.focusin(event);break;case"keyup":fnb.hyperion.forms.input.currency.formatCurrencyHandler(event);break;case"keydown":fnb.hyperion.forms.input.currency.validateKeyPress(event);break;case"focusout":case"blur":fnb.hyperion.forms.input.currency.formatCurrencyBlur(event);break}break;case"username":switch(eventType){case"click":case"focusin":if(targetHasPlaceholder=="true"){clearMask(target)}fnb.hyperion.validateUsername.focusin(event);break;case"keyup":case"keypress":fnb.hyperion.validateUsername.validate(event);break;case"focusout":case"blur":fnb.hyperion.validateUsername.focusout(event);break}break;case"validatePassword":switch(eventType){case"click":case"focusin":fnb.hyperion.validatePassword.validateHandler(event);break;case"paste":case"copy":case"drop":case"cut":fnb.hyperion.validatePassword.cancelEvent(event);break;case"keyup":case"keypress":if(cancelCopyCutPaste(event)){fnb.hyperion.validatePassword.validateHandler(event)}else{fnb.hyperion.validatePassword.cancelEvent(event)}break;case"focusout":case"blur":fnb.hyperion.validatePassword.focusout(event);break}break;case"passwordVerifyPassword":switch(eventType){case"paste":case"drop":fnb.hyperion.validatePassword.cancelEvent(event);break;case"focusout":case"blur":case"keyup":fnb.hyperion.validatePassword.verifyConfirmPassword(event);break}break;default:switch(eventType){case"keydown":if(rule=="validateSpecialChar"){validEvent=validateStandardChar(event)}break}break}switch(eventType){case"focusin":case"click":if(targetHasPlaceholder=="true"){clearMask(target)}return true;break;case"focusout":case"blur":if(targetHasPlaceholder=="false"){setMask(target)}break}if(!validEvent){event.preventDefault()}},getValue:function(){},setValue:function(){},destroy:function(){fnb.hyperion.forms.input={}}};fnb.namespace("forms.input",input,true)})();(function(){function currency(){}currency.prototype={autoInit:true,decimals:2,decimalsPoints:".",thousandsSeperator:",",validKeyCodes:[8,9,35,36,37,39,46],numberKeyCodes:[110,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105],specialCharKeyCodes:[190],ctrlDownKeyCodes:[67,86,88],maxVal:999999999999.99,keyValid:false,init:function(){console.log("Currency Object init")},format:function(target,number,decimals,decimalsPoints,thousandsSeperator){_this=fnb.hyperion.forms.input.currency;var thousandsSeperator=(typeof thousandsSeperator==="undefined")?_this.thousandsSeperator:(thousandsSeperator!=""&&thousandsSeperator!=undefined)?thousandsSeperator:_this.thousandsSeperator;_this.thousandsSeperator=thousandsSeperator;var decimalsPoints=(typeof decimalsPoints==="undefined")?".":_this.decimalsPoints;var decimals=!isFinite(+decimals)?2:Math.abs(_this.decimals);var unicodeDecimal=("\\u"+("0000"+(decimalsPoints.charCodeAt(0).toString(16))).slice(-4));var unicodeSeperator=("\\u"+("0000"+(thousandsSeperator.charCodeAt(0).toString(16))).slice(-4));number=(number+"").replace(".",decimalsPoints).replace(new RegExp(unicodeSeperator,"g"),"").replace(new RegExp(unicodeDecimal,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var tempNumber=!isFinite(+number)?0:+number,formattedString="",toFixedFix=function(tempNumber,decimals){var k=Math.pow(10,decimals);return""+Math.round(tempNumber*k)/k};formattedString=(decimals?toFixedFix(tempNumber,decimals):""+Math.round(tempNumber)).split(".");if(formattedString[0].length>3){formattedString[0]=formattedString[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,thousandsSeperator)}if((formattedString[1]||"").length<decimals){formattedString[1]=formattedString[1]||"";formattedString[1]+=new Array(decimals-formattedString[1].length+1).join("0")}if(target.length()>0){target.val(formattedString.join(decimalsPoints))}else{return formattedString.join(decimalsPoints)}},formatCurrencyHandler:function(event){_this=fnb.hyperion.forms.input.currency;if(_this.keyValid){var target=fnb.hyperion.$(event.currentTarget),charPostion=_this.getCaretCharacterOffsetWithin(target),regex=new RegExp("[s "+_this.thousandsSeperator+"]+","g"),number=target.val(),strLenBeforeFormat=number.length,decimalSeperatorPosition=indexPosition=number.indexOf("."),number=number.replace(regex,""),isNumber=!isNaN(number),formatnumber="",strLenAfterFormat=0;if(isNumber&&number.length>=1&&number>0){_this.format(target,number);formatnumber=target.val();strLenAfterFormat=formatnumber.length}if(charPostion>decimalSeperatorPosition){}else{if(strLenAfterFormat>strLenBeforeFormat&&strLenBeforeFormat!=1){charPostion=charPostion+(strLenAfterFormat-strLenBeforeFormat)}else{if(strLenAfterFormat<strLenBeforeFormat&&strLenBeforeFormat!=1){charPostion=charPostion-(strLenBeforeFormat-strLenAfterFormat)}}}target.elem.selectionStart=charPostion;target.elem.selectionEnd=charPostion}else{event.preventDefault()}},formatCurrencyBlur:function(event){_this=fnb.hyperion.forms.input.currency;var target=fnb.hyperion.$(event.currentTarget),charPostion=_this.getCaretCharacterOffsetWithin(target),regex=new RegExp("[s "+_this.thousandsSeperator+"]+","g"),number=target.val(),number=number.replace(regex,""),isNumber=!isNaN(number);if(isNumber&&number.length>=1&&number>=0){_this.format(target,number)}else{if(number==""||number==undefined||number==".00"||!isNumber){_this.format(target,0)}}},validateKeyPress:function(event){_this=fnb.hyperion.forms.input.currency;_this.keyValid=_this.allowKeyPress(event);if(!_this.keyValid){event.preventDefault()}},allowKeyPress:function(event){_this=fnb.hyperion.forms.input.currency;var keyCode=event.charCode||event.keyCode||event.which;var target=fnb.hyperion.$(event.currentTarget),regex=new RegExp("[s "+_this.thousandsSeperator+"]+","g"),number=target.val(),number=number.replace(regex,""),numberLen=number.length;if(!event.shiftKey){if(_this.numberKeyCodes.indexOf(keyCode)>-1||_this.validKeyCodes.indexOf(keyCode)>-1||_this.specialCharKeyCodes.indexOf(keyCode)>-1||event.ctrlKey&&_this.ctrlDownKeyCodes.indexOf(keyCode)>-1){if(keyCode==110||keyCode===190){var target=fnb.hyperion.$(event.currentTarget),str=target.val(),indexPosition=str.indexOf(".");if(indexPosition==-1){return true}else{target.elem.selectionStart=indexPosition+1;target.elem.selectionEnd=indexPosition+1;return false}}else{if(keyCode==8){var str=target.val(),indexPosition=str.indexOf(".");charPostion=_this.getCaretCharacterOffsetWithin(target);if(indexPosition==(charPostion-1)&&str!="."){target.elem.selectionStart=indexPosition;target.elem.selectionEnd=indexPosition;return false}else{return true}}else{if(number>_this.maxVal){if(_this.numberKeyCodes.indexOf(keyCode)>-1){return false}else{return true}}}}return true}}},focusin:function(event){_this=fnb.hyperion.forms.input.currency;var target=fnb.hyperion.$(event.currentTarget),regex=new RegExp("[s "+_this.thousandsSeperator+"]+","g"),number=target.val(),number=number.replace(regex,""),isNumber=!isNaN(number);if(number==0||!isNumber){target.val("")}},getCaretCharacterOffsetWithin:function(element){var iCaretPos=0;if(document.selection){var oSel=document.selection.createRange();oSel.moveStart("character",-element.val().length);iCaretPos=oSel.text.length}else{if(element.elem.selectionStart||element.elem.selectionStart=="0"){iCaretPos=element.elem.selectionStart}}return(iCaretPos)},destroy:function(){fnb.hyperion.forms.input.currency={}}};fnb.namespace("forms.input.currency",currency,true)})();(function(){activeInput="";isNumber=true;decimals=2;decimalsPoints=".";thousandsSeperator=" ";unicodeDecimal="";regexDecimalNumber="";regexDecimal="";function value(input,value){var data=input.numFormat;var thousandsSeperator=(data)?(typeof data.thousandsSeperator==="undefined")?thousandsSeperator:data.thousandsSeperator:thousandsSeperator;var decimalsPoints=(data)?(typeof data.decimalsPoints==="undefined")?decimalsPoints:data.decimalsPoints:decimalsPoints;var decimals=(data)?(typeof data.decimals==="undefined")?decimals:data.decimals:decimals;if(value){return input.val(format(null,value,decimals,decimalsPoints,thousandsSeperator))}else{var number;if(input.val()===""){return""}number=+(input.val().replace(data.regexDecimalNumber,"").replace(data.regexDecimal,"."));return""+(isFinite(number)?number:0)}}function format(target,number,decimals,decimalsPoints,thousandsSeperator){thousandsSeperator=(typeof thousandsSeperator==="undefined")?" ":thousandsSeperator;decimalsPoints=(typeof decimalsPoints==="undefined")?".":decimalsPoints;decimals=!isFinite(+decimals)?2:Math.abs(decimals);var unicodeDecimal=("\\u"+("0000"+(decimalsPoints.charCodeAt(0).toString(16))).slice(-4));var unicodeSeperator=("\\u"+("0000"+(thousandsSeperator.charCodeAt(0).toString(16))).slice(-4));number=(number+"").replace(".",decimalsPoints).replace(new RegExp(unicodeSeperator,"g"),"").replace(new RegExp(unicodeDecimal,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var tempNumber=!isFinite(+number)?0:+number,formattedString="",toFixedFix=function(tempNumber,decimals){var k=Math.pow(10,decimals);return""+Math.round(tempNumber*k)/k};formattedString=(decimals?toFixedFix(tempNumber,decimals):""+Math.round(tempNumber)).split(".");if(formattedString[0].length>3){formattedString[0]=formattedString[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,thousandsSeperator)}if((formattedString[1]||"").length<decimals){formattedString[1]=formattedString[1]||"";formattedString[1]+=new Array(decimals-formattedString[1].length+1).join("0")}if(target){fnb.hyperion.$("#"+target).val(formattedString.join(decimalsPoints))}else{return formattedString.join(decimalsPoints)}}function allowKeyPress(event){var keyCode=event.charCode||event.keyCode||event.which;if(!event.shiftKey){if(fnb.hyperion.forms.input.numberKeyCodes.indexOf(keyCode)>-1||fnb.hyperion.forms.input.validKeyCodes.indexOf(keyCode)>-1||fnb.hyperion.forms.input.specialCharKeyCodes.indexOf(keyCode)>-1||event.ctrlKey&&fnb.hyperion.forms.input.ctrlDownKeyCodes.indexOf(keyCode)>-1){return true}}return false}function setSelectionRange(input,start,end){if(this.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",end-start);range.select()}else{if(input.setSelectionRange){input.focus();input.setSelectionRange(start,end)}}}function getSelection(input,part){var pos=input.val().length;part=(part.toLowerCase()=="start"?"Start":"End");if(document.selection){var range=document.selection.createRange(),storedRange,selectionStart,selectionEnd;storedRange=range.duplicate();storedRange.expand("textedit");storedRange.setEndPoint("EndToEnd",range);selectionStart=storedRange.text.length-range.text.length;selectionEnd=selectionStart+range.text.length;return part=="Start"?selectionStart:selectionEnd}else{if(typeof(input["selection"+part])!="undefined"){pos=input["selection"+part]}}return pos}function getCaretCharacterOffsetWithin(element){var iCaretPos=0;if(document.selection){element.focus();var oSel=document.selection.createRange();oSel.moveStart("character",-element.val().length);iCaretPos=oSel.text.length}else{if(element.selectionStart||element.selectionStart=="0"){iCaretPos=element.selectionStart}}return(iCaretPos)}function mask(){}mask.prototype={autoInit:true,init:function(){console.log("Forms input mask init")},focus:function(event){activeInput=fnb.hyperion.$(event.currentTarget);var start=getCaretCharacterOffsetWithin(activeInput);if(!activeInput.numFormat){activeInput.numFormat={init:0,counter:0};activeInput.numFormat.isNumber=(activeInput.attr("data-isNumber")=="true")?true:false;activeInput.numFormat.decimals=activeInput.attr("data-decimals")?parseInt(activeInput.attr("data-decimals")):decimals;activeInput.numFormat.decimalsPoints=activeInput.attr("data-decimalsPoints")?activeInput.attr("data-decimalsPoints"):decimalsPoints;activeInput.numFormat.thousandsSeperator=activeInput.attr("data-thousandsSeperator")?activeInput.attr("data-thousandsSeperator"):thousandsSeperator;activeInput.numFormat.unicodeDecimal=("\\u"+("0000"+(activeInput.numFormat.decimalsPoints.charCodeAt(0).toString(16))).slice(-4)),activeInput.numFormat.regexDecimalNumber=new RegExp("[^"+activeInput.numFormat.unicodeDecimal+"0-9]","g"),activeInput.numFormat.regexDecimal=new RegExp(activeInput.numFormat.unicodeDecimal,"g")}},keyDown:function(event){if(!allowKeyPress(event)){return false}var currentInput=fnb.hyperion.$(event.currentTarget);var startfg=getCaretCharacterOffsetWithin(currentInput);var data=currentInput.numFormat;var code=(event.keyCode?event.keyCode:event.which);var character=String.fromCharCode(code);var start=getSelection(currentInput,"start");var end=getSelection(currentInput,"end");var val="";var setPos=false;if(start==0&&end==currentInput.val().length||value(currentInput)==0){if(code===8){start=end=1;currentInput.val("");data.init=(data.decimals>0?-1:0);data.counter=(data.decimals>0?-(data.decimals+1):0);setSelectionRange(0,0)}else{if(character===data.decimalsPoints){start=end=1;currentInput.val("0"+data.decimalsPoints+(new Array(data.decimals+1).join("0")));data.init=(data.decimals>0?1:0);data.counter=(data.decimals>0?-(data.decimals+1):0)}else{if(currentInput.val().length===0){data.init=(data.decimals>0?-1:0);data.counter=(data.decimals>0?-(data.decimals):0)}}}}else{data.counter=end-currentInput.val().length}if(data.decimals>0&&character==data.decimalsPoints&&start==currentInput.val().length-data.decimals-1){data.counter++;data.init=Math.max(0,data.init);event.preventDefault();setPos=currentInput.val().length+data.counter}else{if(character==data.decimalsPoints){data.init=Math.max(0,data.init);event.preventDefault()}else{if(data.decimals>0&&code==8&&start==currentInput.val().length-data.decimals){event.preventDefault();data.counter--;setPos=currentInput.val().length+data.counter}else{if(data.decimals>0&&code==8&&start>currentInput.val().length-data.decimals){if(currentInput.val("")){return}if(currentInput.val().slice(start-1,start)!="0"){val=currentInput.val().slice(0,start-1)+"0"+currentInput.val().slice(start);value(currentInput,val.replace(data.regexDecimalNumber,"").replace(data.regexDecimal,data.decimalsPoints))}event.preventDefault();data.counter--;setPos=currentInput.val().length+data.counter}else{if(code==8&&currentInput.val().slice(start-1,start)==data.thousandsSeperator){event.preventDefault();data.counter--;setPos=currentInput.val().length+data.counter}else{if(data.decimals>0&&start==end&&currentInput.val().length>data.decimals+1&&start>currentInput.val().length-data.decimals-1&&isFinite(+character)&&!event.metaKey&&!event.ctrlKey&&!event.altKey&&character.length===1){if(end===currentInput.val().length){val=currentInput.val().slice(0,start-1)}else{val=currentInput.val().slice(0,start)+currentInput.val().slice(start+1)}currentInput.val(val);setPos=start}}}}}}if(setPos!==false){setSelectionRange(currentInput,setPos,setPos)}currentInput.numFormat=data},keyUp:function(event){var currentInput=fnb.hyperion.$(event.currentTarget);var data=currentInput.numFormat;var code=(event.keyCode?event.keyCode:event.which);var start=getSelection(currentInput,"start");var setPos;value(currentInput,value(currentInput));if(data.decimals>0){if(data.init<1){start=currentInput.val().length-data.decimals-(data.init<0?1:0);data.counter=start-currentInput.val().length;data.init=1;currentInput.numFormat=data}else{if(start>currentInput.val().length-data.decimals&&code!=8||code==39){data.counter++;currentInput.numFormat=data}else{if(code==37){data.counter--;currentInput.numFormat=data}}}}setPos=currentInput.val().length+data.counter;setSelectionRange(currentInput,setPos,setPos)},destroy:function(){fnb.hyperion.forms.input.mask={}}};fnb.namespace("forms.input.mask",mask,true);fnb.hyperion.forms.input.mask.value=value})();(function(){function allowKeyPress(event){var keyCode=event.charCode||event.keyCode||event.which;var fullstop=event.currentTarget.value.split(".").length;if(!event.shiftKey&&fullstop<2||!event.shiftKey&&keyCode!=110){if(fnb.hyperion.forms.input.numberKeyCodes.indexOf(keyCode)>-1||fnb.hyperion.forms.input.validKeyCodes.indexOf(keyCode)>-1||event.ctrlKey&&fnb.hyperion.forms.input.ctrlDownKeyCodes.indexOf(keyCode)>-1){return true}}return false}function maskIt(number){var number=number.toString(),strLen=number.length;if(strLen>7){var nuberArr=number.split(""),maskStr="";for(var i=0;i<nuberArr.length;i++){maskStr+=(i<3||i>=nuberArr.length-3)?nuberArr[i]:"*"}return maskStr}else{return"****"}}function number(){}number.prototype={autoInit:true,init:function(){console.log("Forms input Number init")},keyDown:function(event){return allowKeyPress(event)},keyUp:function(event){var target=fnb.hyperion.$(event.currentTarget);parent=target.parent();maskInput=parent.find(".maskInput");maskValue=maskIt(target.val());maskInput.val(maskValue)},destroy:function(){fnb.hyperion.forms.input.number={}}};fnb.namespace("forms.input.number",number,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"mousemove",selector:".ui-sliderTool",handler:"fnb.hyperion.utils.slider.moveSlider(event);"},{type:"frame",listener:document,events:"mousedown",selector:".ui-sliderTool",handler:"fnb.hyperion.utils.slider.mouseDown(event);"},{type:"frame",listener:document,events:"mouseup",selector:"body",handler:"fnb.hyperion.utils.slider.endMove(event);"},{type:"frame",listener:document,events:"mouseup",selector:".ui-sliderTool",handler:"fnb.hyperion.utils.slider.mouseUp(event);"}];fnb.hyperion.actions.addEvents(events)}function inputSlider(){}inputSlider.prototype={autoInit:true,activeSliderId:"",mousedown:false,touchstarted:false,offSet:false,inputSliderGroup:"",sliderType:"banking",browserSize:"",body:"",screenOffset:"",reInt:"",maxValue:"1300",trusted:"",availableCredit:"",trackMouse:false,init:function(){this.body=fnb.hyperion.$("#bodyContainer");bindEvents();this.tallyInputs();this.tallyOutputs()},destroy:function(){var _this=fnb.hyperion.utils.slider;fnb.hyperion.utils.slider.activeSliderId="";fnb.hyperion.utils.slider.mousedown=false;fnb.hyperion.utils.slider.offSet=false;fnb.hyperion.utils.slider.inputSliderGroup={};fnb.hyperion.utils.slider.sliderGroup={};_this.body=fnb.hyperion.$(_this.body.elem)},mouseDown:function(event,eventType){var _this=fnb.hyperion.utils.slider;event.stop();_this.trackMouse=true;_this.moveSlider(event)},mouseUp:function(event,eventType){var _this=fnb.hyperion.utils.slider;event.stop();_this.endMove(event);var slider=$(event.currentTarget).closest(".ui-slider")[0];var val=$(slider).attr("data-value");var targetDiv=$(slider).attr("data-outputField");var link=$(slider).attr("data-url");if(link){BiFrost.fnb.core.sliderAjaxLoad(link,val,$(slider).attr("data-processType"),targetDiv)}else{lifeinsurance.LifeInsuranceCoverAmountsCapture.performNoSaveQuoteAjaxCall(val,$(slider).attr("data-processType"),targetDiv)}},endMove:function(event){var _this=fnb.hyperion.utils.slider;event.stop();_this.trackMouse=false},startDrag:function(event,eventType){var _this=fnb.hyperion.utils.slider;event.stop();_this.trackMouse=true;while(_this.trackMouse===true){_this.moveSlider(event)}},endDrag:function(event){var _this=fnb.hyperion.utils.slider;event.stop();_this.trackMouse=false},moveSlider:function(event){var _this=fnb.hyperion.utils.slider;if(!_this.trackMouse){return false}val=0;var slider=$(event.currentTarget).closest(".ui-slider");var bar=$(slider).find(".ui-sliderBar");var fill=$(slider).find(".ui-sliderFill");var handle=$(slider).find(".ui-sliderHandle");var npt=$("#"+slider.attr("data-inputField"));var tpt=$("#"+slider.attr("data-outputField"));var min=parseFloat(slider.attr("data-low"));var max=parseFloat(slider.attr("data-high"));var rounding=parseFloat(slider.attr("data-rounding"));var fmtType=slider.attr("data-type");var tallyFields=slider.attr("data-tallyFields");var zeroAllowed=slider.attr("data-zeroAllowed");position=bar[0].getBoundingClientRect();positionFill=fill[0].getBoundingClientRect();var out={x:0,y:0};if(event.type=="touchstart"||event.type=="touchmove"||event.type=="touchend"||event.type=="touchcancel"){var touch=event.originalEvent.touches[0]||event.originalEvent.changedTouches[0];out.x=touch.pageX;out.y=touch.pageY}else{if(event.type=="mousedown"||event.type=="mouseup"||event.type=="mousemove"||event.type=="mouseover"||event.type=="mouseout"||event.type=="mouseenter"||event.type=="mouseleave"){out.x=event.pageX;out.y=event.pageY}}if(out.x<position.left){out.x=position.left}perc=((out.x-position.left)/position.width)*100;if(perc>100){perc=100}fill[0].style.width=perc+"%";var minPerc=min>0?(min/max)*100:0;val=Math.floor(((max-min)*perc)/100);val=val<minPerc?0:val+min;var handleValue;var handleVal;if(val>499999.99){handleValue=(Math.ceil(val)/1000000).toFixed(2);handleVal=(val/1000000).toFixed(2)+"M";npt.val(_this.formatCurrency(handleValue*1000000))}else{handleValue=_this.roundNumber(val,rounding);handleVal=handleValue;npt.val(_this.formatCurrency(_this.roundNumber(val,rounding)))}handle.attr("data-value",_this.formatCurrency(handleVal));slider.attr("data-value",_this.roundNumber(val,rounding));try{}catch(e){}},updateSlider:function(event,obj,slider){var _this=fnb.hyperion.utils.slider;val=0;var slider=slider?$("#"+slider):$(event.currentTarget).closest(".ui-slider");var bar=$(slider).find(".ui-sliderBar");var fill=$(slider).find(".ui-sliderFill");var handle=$(slider).find(".ui-sliderHandle");var npt=$("#"+slider.attr("data-inputField"));var tpt=$("#"+slider.attr("data-outputField"));var rounding=slider.attr("data-rounding");var fmtType=slider.attr("data-type");var tallyFields=slider.attr("data-tallyFields");position=bar[0].getBoundingClientRect();positionFill=fill[0].getBoundingClientRect();var max=parseFloat(slider.attr("data-high"));var unformatedValue=parseFloat(obj.value.replace(/,/g,""));if(unformatedValue<=max){perc=((unformatedValue/max)*100).toFixed(2)}else{perc=100;unformatedValue=max;obj.value=max}fill[0].style.width=perc+"%";if(unformatedValue>499999.99){handleVal=(unformatedValue/1000000).toFixed(2)+"M";handle.attr("data-value",handleVal)}else{handleVal=_this.roundNumber(unformatedValue,rounding);handle.attr("data-value",_this.formatCurrency(handleVal))}slider.attr("data-value",_this.roundNumber(unformatedValue,rounding));var targetDiv=$(slider).attr("data-outputField");var link=$(slider).attr("data-url");if(link){BiFrost.fnb.core.sliderAjaxLoad(link,unformatedValue,$(slider).attr("data-processType"),targetDiv)}else{lifeinsurance.LifeInsuranceCoverAmountsCapture.performNoSaveQuoteAjaxCall(unformatedValue,$(slider).attr("data-processType"),targetDiv)}},tallyInputs:function(){var tInputs=$("[data-tallyfields='true']");var total=0;$(tInputs).each(function(){total=total+parseFloat(this.getAttribute("data-value"))});$("#inputTotal").html("R "+this.formatCurrency(total))},tallyOutputs:function(){var tOutputs=$("[data-tallyOutput='true']");var total=0;$(tOutputs).each(function(){total=total+parseInt(this.innerHTML)});$("#outputTotal").html("R "+this.formatCurrency(total))},roundNumber:function(nStr,rounding){if(parseFloat(rounding)!=0){r1=parseFloat(rounding);return Math.round(parseFloat(nStr)/r1)*r1}else{return parseFloat(nStr)}},formatCurrency:function(nStr){nStr=nStr.toString().replace(/,/g,"");nStr=parseFloat(nStr).toFixed(2);while(true){var n2=nStr.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(nStr==n2){break}nStr=n2}return nStr},addToSliderGroup:function(targetID){var _this=fnb.hyperion.utils.slider},BlockMove:function(event){event.stop()},snapToPointer:function(event){var _this=fnb.hyperion.utils.slider},debounce:function(func,wait){var timeout;var context=this,args=arguments;timeout=setTimeout(function(){func.apply(context,args);clearTimeout(timeout)},wait)}};fnb.namespace("utils.slider",inputSlider,true)})();(function(){function validateUsername(){}validateUsername.prototype={autoInit:true,minLenght:8,maxLenght:30,valiadtionStatus:false,errormessages:{"minError":"Minimum length required is 8 characters.","maxError":"Maximum length allowed is 30 characters.","invalidChars":"<b>Error </b>: Username may only contain @ or . as special characters"},invalidChars:"",errorArr:[],objTimerActive:false,objtimer:"",interval:5000,validateWrapper:"",usernameParentDiv:"",validationImg:"",validateInfo:"",usrnameStatusDesc:"",usernameStatusDiv:"",usernameStatusImg:"",usernameStatusRule:"",validateStatusWrapper:"",ative:false,init:function(){console.log("validateUsername object init!")},focusin:function(event){this.active=true;var target=fnb.hyperion.$(event.currentTarget);this.dummyInput=target;this.parentDiv=target.parent().parent();this.validateWrapper=this.parentDiv.find(".validateWrapper");this.validateWrapper.show();this.realInput=this.parentDiv.find(".username");this.validateStatusWrapper=this.parentDiv.find(".validateStatusWrapper");this.usernameParentDiv=this.parentDiv.find('! [data-role="usernameValRule"]');this.validationImg=this.usernameParentDiv.find(".validateImg");this.validateInfo=this.usernameParentDiv.find(".validateInfo");this.ErorMsg=this.usernameParentDiv.find(".validateError");this.usrnameStatusDesc=this.parentDiv.find('! [data-role="usernameStatusDesc"]');this.usernameStatusDiv=this.parentDiv.find('! [data-role="checkUsernameStatus"]');this.usernameStatusImg=this.usernameStatusDiv.find(".validateImg");this.usernameStatusRule=this.usernameStatusDiv.find(".validateRule")},validate:function(event){this.errorArr=[];this.invalidChars="";this.validateWrapper.show();var target=fnb.hyperion.$(event.currentTarget),text=target.val(),status=false;if(text.length==0){this.validationImg.removeClass("valSuccess");this.validationImg.removeClass("valFailed");this.validationImg.addClass("valNone");this.ErorMsg.hide();this.validateInfo.show();return false}else{this.realInput.val(this.dummyInput.val())}if(this.validateChars(text)&&this.validateLength(text)){this.valiadtionStatus=true;this.validationImg.removeClass("valNone");this.validationImg.removeClass("valFailed");this.validationImg.addClass("valSuccess");this.ErorMsg.hide();this.validateInfo.show();if(this.objTimerActive==false){this.objTimerActive=true;this.objTimer=setInterval(function(){fnb.hyperion.validateUsername.focusout()},this.interval)}}else{this.valiadtionStatus=false;this.validateWrapper.show();this.ErorMsg.hide();this.validateInfo.show();this.validationImg.removeClass("valNone");this.validationImg.removeClass("valSuccess");this.validationImg.addClass("valFailed");var infoHtml="";for(var i=0;i<this.errorArr.length;i++){if(this.errorArr[i]=="invalidChars"){this.validateInfo.hide();this.ErorMsg.find(".errorP").html(this.errormessages["invalidChars"]);this.ErorMsg.show()}else{infoHtml+=this.errormessages[this.errorArr[i]]+" "}}if(this.objTimerActive){this.clearInerval()}}},validateChars:function(text){var pattern=/^[a-zA-Z0-9@\.]+$/;if(pattern.test(text)){return true}else{var entryArray=text.split(""),arrLen=entryArray.length,a=0;for(var i=0;i<arrLen;i++){if(!pattern.test(entryArray[i])){if(a!=0){this.invalidChars+=", "}this.invalidChars+=entryArray[i];a++}}if(a>0){this.errorArr.push("invalidChars")}return false}},validateLength:function(text){if(text.length>=this.minLenght&&text.length<=this.maxLenght){return true}else{if(text.length<this.minLenght){this.errorArr.push("minError")}else{if(text.length>this.maxLenght){this.errorArr.push("maxError")}}}},focusout:function(event){if(this.objTimerActive){this.clearInerval()}this.active=false;this.validateWrapper.hide();textLen=this.dummyInput.val().length;if(this.valiadtionStatus&&textLen>0){this.validateStatusWrapper.removeClass("valFailed");this.validateStatusWrapper.addClass("valSuccess")}else{if(!this.valiadtionStatus&&textLen>0){this.validateStatusWrapper.removeClass("valSuccess");this.validateStatusWrapper.addClass("valFailed")}else{this.validateStatusWrapper.removeClass("valSuccess");this.validateStatusWrapper.removeClass("valFailed")}}},clearInerval:function(){this.objTimerActive=false;window.clearInterval(fnb.hyperion.validateUsername.objTimer)},destroy:function(){fnb.hyperion.validateUsername={}}};fnb.namespace("validateUsername",validateUsername,true)})();(function(){function validatePassword(){}validatePassword.prototype={autoInit:true,minLenght:7,maxLenght:30,ruleGroupOne:0,ruleGroupTwo:0,ruleGroupThree:0,totalRules:9,rulesPassed:0,group:undefined,objTimer:"",objTimerActive:false,interval:5000,valiadtionStatus:false,validateUserName:false,validateEnv:"banking",inputID:0,focus:false,errormessages:{"minError":"Minimum length required is 7 characters.","maxError":"Maximum length allowed is 30 characters.","invalidChars":"<b>Error</b>: Password cannot contain: ","asteriskError":"<b>Error</b>: Password cannot start with an <b>asterisk</b> (*)."},invalidChars:"",errorArr:[],active:false,showPassword:false,init:function(){console.log("validatePassword object init!")},focusin:function(event){this.clearObject();this.active=true;if(this.objTimerActive){this.clearInerval()}this.group.passwordEl=fnb.hyperion.$(event.currentTarget);var placeHolder=this.group.passwordEl.attr("data-placeholder"),text=this.group.passwordEl.val(),text=(text==placeHolder)?"":text;this.group.passwordEl.val(text);this.group.passwordEl.attr("data-placeholderis","false");this.inputID++;this.group.passwordEl.attr("data-inputid",this.inputID);this.group.ParentDiv=this.group.passwordEl.parent().parent().parent();this.group.realPassword=this.group.ParentDiv.find(".passwordReal");this.group.confirmPassEl=this.group.ParentDiv.find('! [data-type="passwordVerifyPassword"]');this.group.formElContentPassword=this.group.ParentDiv.find("! .password .formElContent");this.group.formElContentPasswordConfirm=this.group.ParentDiv.find("! .passwordConfirm .formElContent");this.group.passwordConfirmNote=this.group.ParentDiv.find(".passwordConfirmNote");this.populateUserId();this.group.validateHistory=this.group.ParentDiv.find('! .validateUsernamePassword.password [data-type="validatePassword"]').attr("data-history");this.group.validateWrapper=this.group.ParentDiv.find(".validateWrapper");this.group.validateStatusWrapper=this.group.ParentDiv.find(".validateStatusWrapper");this.group.validateProgress=this.group.ParentDiv.find('! [data-role="passwordProgress"]');this.group.passwordLengthParentDiv=this.group.ParentDiv.find('! [data-role="passwordLength"]');this.group.passwordLengthImg=this.group.passwordLengthParentDiv.find(".validateImg");this.group.passwordLengthRule=this.group.passwordLengthParentDiv.find(".validateRule");this.group.validateInfo=this.group.passwordLengthParentDiv.find(".validateInfo");this.group.lowerCaseParentDiv=this.group.ParentDiv.find('! [data-role="passwordLowercase"]');this.group.lowerCaseImg=this.group.lowerCaseParentDiv.find(".validateImg");this.group.lowerCaseRule=this.group.lowerCaseParentDiv.find(".validateRule");this.group.upperCaseParentDiv=this.group.ParentDiv.find('! [data-role="passwordUppercase"]');this.group.upperCaseImg=this.group.upperCaseParentDiv.find(".validateImg");this.group.upperCaseRule=this.group.upperCaseParentDiv.find(".validateRule");this.group.numericParentDiv=this.group.ParentDiv.find('! [data-role="passwordNumber"]');this.group.numericImg=this.group.numericParentDiv.find(".validateImg");this.group.numericRule=this.group.numericParentDiv.find(".validateRule");this.group.specialCharParentDiv=this.group.ParentDiv.find('! [data-role="passwordspecialChar"]');this.group.specialCharImg=this.group.specialCharParentDiv.find(".validateImg");this.group.specialCharRule=this.group.specialCharParentDiv.find(".validateRule");this.group.specialCharError=this.group.specialCharParentDiv.find(".validateError");this.group.specialCharError.hide();this.group.passwordUsernameParentDiv=this.group.ParentDiv.find('! [data-role="passwordUsername"]');this.group.passwordUsernameImg=this.group.passwordUsernameParentDiv.find(".validateImg");this.group.passwordUsernameRule=this.group.passwordUsernameParentDiv.find(".validateRule");this.group.passwordUsername={status:"none"};this.group.passwordHistoryParentDiv=this.group.ParentDiv.find('! [data-role="passwordUsernameHistory"]');this.group.passwordHistoryImg=this.group.passwordHistoryParentDiv.find(".validateImg");this.group.passwordHistoryRule=this.group.passwordHistoryParentDiv.find(".validateRule");this.group.history={status:"none"};this.group.validateWrapper.show();this.group.formElContentPassword.show();(this.group.validateHistory=="false")?this.group.passwordHistoryParentDiv.addClass("disablePassHistory"):this.group.passwordHistoryParentDiv.removeClass("disablePassHistory");if(this.validateEnv=="sales"){this.group.passwordHistoryParentDiv.addClass("Hhide")}if(this.group.passwordEl.val().length>0){this.validate(text)}else{this.resetAll()}},populateUserId:function(){var usernameInputTag=fnb.hyperion.$('! .input[data-type="username"]');var usernameId=fnb.hyperion.$('! .validateUsernamePassword.password [data-type="validatePassword"]').attr("data-userid");if(usernameInputTag.length()>0){var usernameInput=usernameInputTag.val();var usernameInputDataPlaceHolder=usernameInputTag.attr("data-placeholder");if(usernameInput!=""&&usernameInput!=usernameInputDataPlaceHolder){this.userId=usernameInput}else{this.userId=usernameId}}else{this.userId=usernameId}},validateHandler:function(event){var target=fnb.hyperion.$(event.currentTarget),text=target.val(),inputID=target.attr("data-inputid"),eventType=event.type;if(this.focus==true&&eventType=="click"&&inputID==this.inputID){if(this.group.active==false){this.group.validateWrapper.show();this.group.active=true}this.cancelEvent(event)}else{if(this.focus==true&&eventType=="click"&&inputID!=this.inputID){this.focusout(event);this.focusin(event);this.focus=true}else{if((this.focus==false&&eventType=="click")||(eventType=="focusin")){this.focusin(event);this.focus=true}else{if(eventType=="keyup"||eventType=="keypress"){this.validate(text)}}}}},validate:function(text){this.rulesPassed=0;this.errorArr=[];this.invalidChars="";this.ruleGroupOne=0;this.ruleGroupTwo=0;this.ruleGroupThree=0;this.group.passwordUsername.status="none";this.group.history.status="none";var status=false,passLen=false;asteriskValide=false;this.group.validateWrapper.show();if(text.length==0){this.resetAll();return false}else{this.group.realPassword.val(this.group.passwordEl.val())}if(this.validateAsterisk(text)){this.ruleGroupOne++;this.group.specialCharError.show();this.group.specialCharError.find(".errorP").html(this.errormessages["asteriskError"]);asteriskValide=true}else{this.group.specialCharError.hide();this.group.specialCharError.find(".errorP").html("")}if(this.validateChars(text)&&this.validateLength(text)){this.ruleGroupOne+=2;this.group.passwordLengthImg.removeClass("valNone");this.group.passwordLengthImg.removeClass("valFailed");this.group.passwordLengthImg.addClass("valSuccess");this.group.validateInfo.hide();passLen=true}else{this.group.passwordLengthImg.removeClass("valNone");this.group.passwordLengthImg.removeClass("valSuccess");this.group.passwordLengthImg.addClass("valFailed");var infoHtml="";for(var i=0;i<this.errorArr.length;i++){if(this.errorArr[i]=="invalidChars"&&!asteriskValide){this.group.specialCharError.show();this.group.specialCharError.find(".errorP").html(this.errormessages["invalidChars"]+this.invalidChars)}else{(!asteriskValide)?this.group.specialCharError.hide():"";infoHtml+=this.errormessages[this.errorArr[i]]+" "}}this.group.validateInfo.html(infoHtml);this.group.validateInfo.show()}var groupTwoValidation=[];var disableElements=this.group.ParentDiv.find(".disableValidate");if(disableElements.length()>0){disableElements.each(function(element){element.removeClass("disableValidate")})}if(this.validateLowercase(text)){this.ruleGroupTwo++;this.group.lowerCaseImg.removeClass("valNone");this.group.lowerCaseImg.removeClass("valFailed");this.group.lowerCaseImg.addClass("valSuccess")}else{groupTwoValidation.push("lowercase");this.group.lowerCaseImg.removeClass("valNone");this.group.lowerCaseImg.removeClass("valSuccess");this.group.lowerCaseImg.addClass("valFailed")}if(this.validateUppercase(text)){this.ruleGroupTwo++;this.group.upperCaseImg.removeClass("valNone");this.group.upperCaseImg.removeClass("valFailed");this.group.upperCaseImg.addClass("valSuccess")}else{groupTwoValidation.push("uppercase");this.group.upperCaseImg.removeClass("valNone");this.group.upperCaseImg.removeClass("valSuccess");this.group.upperCaseImg.addClass("valFailed")}if(this.validateNumeric(text)){this.ruleGroupTwo++;this.group.numericImg.removeClass("valNone");this.group.numericImg.removeClass("valFailed");this.group.numericImg.addClass("valSuccess")}else{groupTwoValidation.push("numeric");this.group.numericImg.removeClass("valNone");this.group.numericImg.removeClass("valSuccess");this.group.numericImg.addClass("valFailed")}if(this.validateSpecialChar(text,asteriskValide)){this.ruleGroupTwo++;this.group.specialCharImg.removeClass("valNone");this.group.specialCharImg.removeClass("valFailed");this.group.specialCharImg.addClass("valSuccess")}else{groupTwoValidation.push("specialCar");this.group.specialCharImg.removeClass("valNone");this.group.specialCharImg.removeClass("valSuccess");this.group.specialCharImg.addClass("valFailed")}if(groupTwoValidation.length==1){switch(groupTwoValidation[0]){case"lowercase":this.group.lowerCaseParentDiv.addClass("disableValidate");this.group.lowerCaseImg.removeClass("valSuccess");this.group.lowerCaseImg.removeClass("valFailed");this.group.lowerCaseImg.addClass("valNone");break;case"uppercase":this.group.upperCaseParentDiv.addClass("disableValidate");this.group.upperCaseImg.removeClass("valFailed");this.group.upperCaseImg.removeClass("valSuccess");this.group.upperCaseImg.addClass("valNone");break;case"numeric":this.group.numericParentDiv.addClass("disableValidate");this.group.numericImg.removeClass("valFailed");this.group.numericImg.removeClass("valSuccess");this.group.numericImg.addClass("valNone");break;case"specialCar":this.group.specialCharParentDiv.addClass("disableValidate");this.group.specialCharImg.removeClass("valSuccess");this.group.specialCharImg.removeClass("valFailed");this.group.specialCharImg.addClass("valNone");break}}if(groupTwoValidation.length<=1&&passLen==true){if(this.validateUserName){if(this.group.validateHistory=="false"){this.ruleGroupThree++;this.rulesPassed++}this.validateUsernameInPass(text);this.updateProgressBar()}else{this.validateUsernamePass(text)}}else{this.group.passwordUsernameImg.removeClass("valNone");this.group.passwordUsernameImg.removeClass("valSuccess");this.group.passwordUsernameImg.addClass("valFailed");if(this.validateHistory=="true"){this.group.passwordHistoryImg.removeClass("valNone");this.group.passwordHistoryImg.removeClass("valSuccess");this.group.passwordHistoryImg.addClass("valFailed")}this.updateProgressBar()}},validateUsernamePass:function(text){var target=fnb.hyperion.$("#emptyTarget");text=encodeURIComponent(text);var url="/banking/Controller?nav=password.util.navigator.PasswordChecker";var parms="newUserPass="+text+"&newUserId="+this.userId;fnb.hyperion.controller.raiseEvent("asyncLoadContent",{url:url,target:target,postLoadingCallback:this.updatecheckUsernameStatusRule,params:parms})},updatecheckUsernameStatusRule:function(loadObj){var _this=fnb.hyperion.validatePassword;var validateHistory=_this.group.validateHistory;var results=loadObj.data.toLowerCase();_this.ruleGroupThree=0;if(results.indexOf("operation successful")>-1){_this.group.passwordUsernameImg.removeClass("valNone");_this.group.passwordUsernameImg.removeClass("valFailed");_this.group.passwordUsernameImg.addClass("valSuccess");if(validateHistory=="true"){_this.group.passwordHistoryImg.removeClass("valNone");_this.group.passwordHistoryImg.removeClass("valFailed");_this.group.passwordHistoryImg.addClass("valSuccess")}_this.ruleGroupThree+=2;_this.rulesPassed+=2;_this.group.passwordUsername.status="succes";_this.group.history.status="succes"}else{if(results.indexOf("password must be different from login id")>-1||results.indexOf("password must not contain username")>-1){_this.group.passwordUsernameImg.removeClass("valNone");_this.group.passwordUsernameImg.removeClass("valSuccess");_this.group.passwordUsernameImg.addClass("valFailed");_this.group.passwordUsername.status="failed"}else{if(results.indexOf("new passwords may not be the same as the previous 3 passwords")>-1||results.indexOf("password cannot be the same as your previous 3 passwords")>-1){_this.group.passwordHistoryImg.removeClass("valNone");_this.group.passwordHistoryImg.removeClass("valSuccess");_this.group.passwordHistoryImg.addClass("valFailed");_this.group.history.status="failed"}}}_this.updateProgressBar()},validateChars:function(text){var pattern=/^[^\*][a-zA-Z0-9!@#\$%:\^\&*\]\[\)\(\|\{\}+=.`~;,_?\/-]+$/;if(pattern.test(text)){this.rulesPassed++;return true}else{var entryArray=text.split(""),arrLen=entryArray.length,a=0;var pattern=/^[a-zA-Z0-9!@#\$%:\^\&\*\]\[\)\(\|\{\}+=\.`~;,_?\/-]+$/;this.invalidChars="";for(var i=0;i<arrLen;i++){if(!pattern.test(entryArray[i])){if(a!=0){this.invalidChars+=", "}this.invalidChars+=(entryArray[i]==" ")?"(space)":entryArray[i];a++}}if(a>0){this.errorArr.push("invalidChars")}return false}},validateAsterisk:function(text){var pattern=/^[\*]+/;if(pattern.test(text)){return true}else{this.rulesPassed++;return false}},validateLength:function(text){if(text.length>=this.minLenght&&text.length<=this.maxLenght){this.ruleGroupOne++;this.rulesPassed++;return true}else{if(text.length<this.minLenght){this.errorArr.push("minError")}else{if(text.length>this.maxLenght){this.errorArr.push("maxError")}}}},validateLowercase:function(text){var pattern=/[a-z]+/;if(pattern.test(text)){this.rulesPassed++;return true}else{return false}},validateUppercase:function(text){var pattern=/[A-Z]+/;if(pattern.test(text)){this.rulesPassed++;return true}else{return false}},validateNumeric:function(text){var pattern=/[0-9]+/;if(pattern.test(text)){this.rulesPassed++;return true}else{return false}},validateSpecialChar:function(text,asteriskValid){var pattern=/[!@#\$%\^\&*\]\[\)\(\|\{\}:+=.`~;,_?\/-]+/;if(pattern.test(text)&&!asteriskValid){return this.checkInvalidSpecialChars(text)}else{return false}},checkInvalidSpecialChars:function(text){var pattern=/[\\\>\<]+/;if(pattern.test(text)&&!asteriskValid){return false}else{this.rulesPassed++;return true}},focusout:function(event){this.group.active=false;var text=this.group.passwordEl.val();if(this.objTimerActive){this.clearInerval()}this.verifyConfirmPassword(event);this.group.validateWrapper.hide()},updateProgressBar:function(){var percentage=Math.round(this.rulesPassed/this.totalRules*100);percentage=(percentage>100)?100:percentage;this.group.validateProgress.css("width",percentage+"%");textLenght=this.group.passwordEl.val().length;if((this.ruleGroupOne==3&&this.ruleGroupTwo>=3&&this.ruleGroupThree==2)&&textLenght>0){if(this.objTimerActive==false){this.objTimerActive=true;this.objTimer=setInterval(function(){fnb.hyperion.validatePassword.focusout()},this.interval)}this.group.validateStatusWrapper.removeClass("valFailed");this.group.validateStatusWrapper.addClass("valSuccess")}else{if((this.ruleGroupOne!=2||this.ruleGroupTwo<3||this.ruleGroupThree!=2)&&textLenght>0){if(this.objTimerActive){this.clearInerval()}this.group.validateWrapper.show();this.group.formElContentPassword.show();this.active=true;this.group.validateStatusWrapper.removeClass("valSuccess");this.group.validateStatusWrapper.addClass("valFailed")}else{if(textLenght==0){if(this.objTimerActive){this.clearInerval()}this.active=true;this.group.validateStatusWrapper.removeClass("valSuccess");this.group.validateStatusWrapper.removeClass("valFailed")}}}if(this.ruleGroupOne!=3||this.ruleGroupTwo<3){if(this.group.passwordUsername.status!="failed"){this.group.passwordUsernameImg.removeClass("valFailed");this.group.passwordUsernameImg.removeClass("valSuccess");this.group.passwordUsernameImg.addClass("valNone")}if(this.group.history.status!="failed"){this.group.passwordHistoryImg.removeClass("valFailed");this.group.passwordHistoryImg.removeClass("valSuccess");this.group.passwordHistoryImg.addClass("valNone")}}},validateUsernameInPass:function(text){var patternText="",usernameEl=fnb.hyperion.$('! .validateUsernamePassword  [data-type="username"]'),usernamePlaceHolder=usernameEl.attr("data-placeholder"),usernameText=usernameEl.val(),usernameText=(usernameText==usernamePlaceHolder)?"":usernameText,usernameArr=usernameText.split("");for(var i=0;i<usernameArr.length;i++){patternText+="["+usernameArr[i]+"]"}var pattern=new RegExp(patternText,"g");if(!pattern.test(text)&&usernameArr.length>0){this.rulesPassed++;this.ruleGroupThree++;this.group.passwordUsernameImg.removeClass("valNone");this.group.passwordUsernameImg.removeClass("valFailed");this.group.passwordUsernameImg.addClass("valSuccess");this.group.passwordUsername.status="success";return true}else{if(usernameArr.length>0){this.group.passwordUsernameImg.removeClass("valNone");this.group.passwordUsernameImg.removeClass("valSuccess");this.group.passwordUsernameImg.addClass("valFailed");this.group.passwordUsername.status="failed";return false}else{this.group.passwordUsernameImg.removeClass("valFailed");this.group.passwordUsernameImg.removeClass("valSuccess");this.group.passwordUsernameImg.addClass("valNone");this.group.passwordUsername.status="failed";return false}}},toggelShowPassword:function(event){var target=fnb.hyperion.$(event.currentTarget),value=target.find("=input").val(),ParentDiv=target.parent().parent().parent().parent();var newpassword=ParentDiv.find('! [data-type="validatePassword"]'),newConfirmPass=ParentDiv.find('! [data-type="passwordVerifyPassword"]');if(value=="hide"){newpassword.attr("type","password");newConfirmPass.attr("type","password")}else{if(value=="show"){newpassword.attr("type","text");newConfirmPass.attr("type","text")}}},verifyConfirmPassword:function(event){if(this.group==undefined){return false}else{var target=(event==undefined)?this.group.confirmPassEl:fnb.hyperion.$(event.currentTarget)}if(target==this.group.confirmPassEl){var passVal=this.group.passwordEl.val();var confirmVal=this.group.confirmPassEl.val()}else{this.group.ParentDiv=target.parent().parent().parent();this.group.formElContentPasswordConfirm=this.group.ParentDiv.find("! .passwordConfirm .formElContent");this.group.passwordEl=this.group.ParentDiv.find('! [data-type="validatePassword"]');this.group.confirmPassEl=this.group.ParentDiv.find('! [data-type="passwordVerifyPassword"]');var passVal=this.group.passwordEl.val();var confirmVal=this.group.confirmPassEl.val()}this.group.formElContentPasswordConfirm.show();this.group.passwordConfirmElimg=this.group.formElContentPasswordConfirm.find(".validateImg");this.group.passwordConfirmEldesc=this.group.formElContentPasswordConfirm.find(".validateRule");if(passVal==confirmVal&&passVal!=""&&confirmVal!=""){this.group.passwordConfirmElimg.removeClass("valFailed");this.group.passwordConfirmElimg.addClass("valSuccess");this.group.passwordConfirmEldesc.html("Passwords match")}else{if(confirmVal.length>0){this.group.passwordConfirmElimg.removeClass("valSuccess");this.group.passwordConfirmElimg.addClass("valFailed");(passVal==""||confirmVal=="")?this.group.passwordConfirmEldesc.html(""):this.group.passwordConfirmEldesc.html("Password do not match")}else{if(confirmVal.length==0){this.group.passwordConfirmElimg.removeClass("valSuccess");this.group.passwordConfirmElimg.removeClass("valFailed");this.group.passwordConfirmElimg.removeClass("valNone");this.group.passwordConfirmEldesc.html("")}}}},clearInerval:function(){this.objTimerActive=false;window.clearInterval(fnb.hyperion.validatePassword.objTimer)},cancelEvent:function(event){event.preventDefault();event.stopImmediatePropagation();return false},clearObject:function(){this.ruleGroupOne=0;this.ruleGroupTwo=0;this.ruleGroupThree=0;this.totalRule=9;this.rulesPassed=0;this.group={}},resetAll:function(){var allImageElem=this.group.ParentDiv.find(".validateImg");allImageElem.each(function(element){element.removeClass("valFailed");element.removeClass("valSuccess");element.addClass("valNone")});this.group.realPassword.val("");this.group.specialCharError.hide();this.updateProgressBar()},destroy:function(){fnb.hyperion.validatePassword={}}};fnb.namespace("validatePassword",validatePassword,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"click",selector:".radioGroupWrapper .radioButton",handler:"fnb.hyperion.forms.radioButton.select(event);"},{type:"frame",listener:document,events:"click",selector:"* .checkRadioButtons  .radioGroupWrapper .radioButton",handler:"fnb.hyperion.forms.radioButton.selectCheckRadio(event);"}];fnb.hyperion.controller.attachActionEvents(events)}function radioButton(){}radioButton.prototype={autoInit:true,init:function(){console.log("Forms RadioButton init");bindEvents()},selectCheckRadio:function(event){var _this=this;var target=fnb.hyperion.$(event.currentTarget),groupContainer=target.parent().parent().parent().parent(),tragetGroupContainer=target.parent(),defaultSelect=target.attr("data-defaultselected");if(defaultSelect!=undefined&&defaultSelect!=""&&defaultSelect!=false&&defaultSelect!="false"){}else{defaultButtons=groupContainer.find('*[data-defaultselected="true"]');totaldefaultNotSelected=groupContainer.find('*[data-defaultselected="true"][data-state="unChecked"]');totaldefaultNotSelectedLen=totaldefaultNotSelected.length();if(totaldefaultNotSelectedLen>1){groupContainer.find("* .radioButton").attr("data-state","unChecked");groupContainer.find("=input").attr("checked","");defaultButtons.each(function(element){_this.setSelected(element)});tragetGroupContainer.find("* .radioButton").attr("data-state","unChecked");tragetGroupContainer.find("=input").attr("checked","");_this.setSelected(target)}}},select:function(event){var _this=this;var target=fnb.hyperion.$(event.currentTarget);var targetParent=target.parent();var idDisabled=(targetParent.attr("data-disabled"))?(targetParent.attr("data-disabled")=="true")?true:false:false;if(!idDisabled){target.parent().children().each(function(element){_this.setUnSelected(element)});_this.setSelected(target)}},setSelected:function(target){target.attr("data-state","checked");target.find("=input").attr("checked",true)},setUnSelected:function(target){target.attr("data-state","unChecked");target.find("=input").attr("checked","")},setDisabled:function(target){target.attr("data-state","disabled")},getValue:function(element){return element.attr("data-state")},setValue:function(element,value){switch(value){case"selected":this.setSelected(element);break;case"unSelected":this.setUnSelected(element);break;default:}},destroy:function(){fnb.hyperion.forms.radioButton={}}};fnb.namespace("forms.radioButton",radioButton,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"mouseup",selector:"#bodyContainer",handler:'fnb.hyperion.forms.rangeSlider.sliderBtnMouseUp(event,"mouse");'},{type:"frame",listener:document,events:"touchend",selector:"#bodyContainer",handler:'fnb.hyperion.forms.rangeSlider.sliderBtnMouseUp(event,"touch");'},{type:"frame",listener:document,events:"click",selector:".pointLabel",handler:"fnb.hyperion.forms.rangeSlider.snapToPointer(event);"},{type:"frame",listener:document,events:"click",selector:"#setSlider",handler:"fnb.hyperion.forms.rangeSlider.testFunc();"},{type:"frame",listener:document,events:"mousedown",selector:'[data-role="btnLabel"]',handler:'fnb.hyperion.forms.rangeSlider.sliderBtnMouseDown(event,"mouse")'},{type:"frame",listener:document,events:"mouseout",selector:'[data-role="btnLabel"]',handler:"fnb.hyperion.forms.rangeSlider.sliderBtnMouseOut(event)"},{type:"frame",listener:document,events:"touchstart",selector:'[data-role="btnLabel"]',handler:'fnb.hyperion.forms.rangeSlider.sliderBtnMouseDown(event,"touch")'}];fnb.hyperion.actions.addEvents(events)}function rangeSlider(){}rangeSlider.prototype={autoInit:true,activeSliderId:"",mousedown:false,touchstarted:false,offSet:false,rangeSliderGroup:"",sliderType:"banking",browserSize:"",body:"",screenOffset:"",reInt:"",maxValue:"1300",trusted:"",availableCredit:"",init:function(){console.log("Forms rangeSlider init");bindEvents();this.browserSize=this.getBrowserSize()},checkRenit:function(){_this=fnb.hyperion.forms.rangeSlider;var element=fnb.hyperion.$("#mvnoSettings");if(element.length()>0){var reInt=element.attr("data-reint");if(reInt=="true"||reInt==true){fnb.hyperion.forms.rangeSlider.destroy();fnb.hyperion.$("#mvnoSettings").attr("data-reint","false")}_this.trusted=element.attr("data-trusted");_this.availableCredit=element.attr("data-availableCredit")}},destroy:function(){var _this=fnb.hyperion.forms.rangeSlider;fnb.hyperion.forms.rangeSlider.activeSliderId="";fnb.hyperion.forms.rangeSlider.mousedown=false;fnb.hyperion.forms.rangeSlider.offSet=false;fnb.hyperion.forms.rangeSlider.rangeSliderGroup={};fnb.hyperion.forms.rangeSlider.sliderGroup={};_this.body=fnb.hyperion.$("#bodyContainer")},sliderBtnMouseOut:function(){var _this=fnb.hyperion.forms.rangeSlider;if(_this.mousedown){console.log("sliderBtnMouseOut ");_this.mousedown=false;var targetID=_this.activeSliderId;fnb.hyperion.delegate.off(_this.body.elem,"mousemove",fnb.hyperion.forms.rangeSlider.bindToMouseMove);var i=0,len=_this.sliderGroup[targetID].snapPointsArr.length,closestPointIndex=0,pointVal=0,newPointVal=0;sliderPercentage=_this.sliderGroup[targetID].progressPercentage;for(i;i<len;i++){newPointVal=Math.abs(sliderPercentage-_this.sliderGroup[targetID].snapPointsArr[i].percentage);if(newPointVal<pointVal||pointVal==0){closestPointIndex=i;pointVal=newPointVal}}console.log("sliderPercentage :"+sliderPercentage+" closest Point Index :"+closestPointIndex);sliderPercentage=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].percentage;var snapPointLabel=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].dataBtnLabel;_this.setSnapValueToYouPay(targetID,closestPointIndex);_this.sliderGroup[targetID].rangeSlideProgress.find('![data-role="btnLabel"]').html(snapPointLabel);sliderPercentage=(sliderPercentage>100)?100:sliderPercentage;_this.doChangeLabelAlign(targetID,sliderPercentage);_this.sliderGroup[targetID].progressPercentage=sliderPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.calculatePackageTotal(targetID,closestPointIndex)}},sliderBtnMouseDown:function(event,eventType){var _this=fnb.hyperion.forms.rangeSlider;_this.checkRenit();var target=fnb.hyperion.$(event.currentTarget),targetID=target.attr("data-sliderid");if(_this.sliderGroup==undefined){_this.sliderGroup={};_this.addToSliderGroup(targetID);_this.browserSize=_this.getBrowserSize();_this.body=fnb.hyperion.$("#bodyContainer");this.browserSize=_this.getBrowserSize()}if(_this.activeSliderId!=targetID){if(_this.sliderGroup[targetID]==undefined){_this.addToSliderGroup(targetID)}else{_this.activeSliderId=targetID;_this.browserSize=_this.getBrowserSize();_this.sliderGroup[targetID].rangeSliderWidth=_this.sliderGroup[targetID].rangeSliderContainer.outerWidth()}}else{_this.browserSize=_this.getBrowserSize();_this.sliderGroup[targetID].rangeSliderWidth=_this.sliderGroup[targetID].rangeSliderContainer.outerWidth()}curentActiveSlider=fnb.hyperion.$("#rangeSliderContainer"+targetID),position=curentActiveSlider.elem.getBoundingClientRect();positionBtnLabel=_this.sliderGroup[targetID].rangeSliderBtnLabel.elem.getBoundingClientRect();if(fnb.hyperion.controller.IE==true){_this.sliderGroup[targetID].fixClientX=true}else{_this.sliderGroup[targetID].fixClientX=false}if(this.mousedown==false&&eventType=="mouse"){this.mousedown=true;fnb.hyperion.delegate.on(_this.body.elem,"mousemove",fnb.hyperion.forms.rangeSlider.bindToMouseMove)}else{if(this.touchstarted==false&&eventType=="touch"){this.touchstarted=true;fnb.hyperion.delegate.on(_this.body.elem,"touchmove",fnb.hyperion.forms.rangeSlider.BlockMove);fnb.hyperion.delegate.on(_this.body.elem,"touchmove",fnb.hyperion.forms.rangeSlider.bindToTouchMove)}}},addToSliderGroup:function(targetID){var _this=fnb.hyperion.forms.rangeSlider,groupId=parseInt(targetID);_this.sliderGroup[targetID]={};_this.sliderGroup[targetID].rangeSliderContainer=fnb.hyperion.$("#rangeSliderContainer"+targetID);_this.sliderGroup[targetID].rangeSliderWidth=_this.sliderGroup[targetID].rangeSliderContainer.outerWidth();_this.sliderGroup[targetID].snapPointsElements=_this.sliderGroup[targetID].rangeSliderContainer.find(".point");_this.sliderGroup[targetID].snapPointsArr=[];snapPointsElementsLen=_this.sliderGroup[targetID].snapPointsElements.length()-1;_this.sliderGroup[targetID].snapPointsElements.each(function(element,index){console.log(element);var NewSnapPointObj={"percentage":parseInt(element.attr("data-percentage")),"value":parseFloat(element.attr("data-value")).toFixed(2),"pointLabel":element.find("! .pointLabel").html(),"itemCode":element.attr("data-itemCode"),"itemSkuCode":element.attr("data-itemskucode"),"dataBtnLabel":element.attr("data-btnlabel"),"rate":element.attr("data-rate")};if(element.attr("data-snappointselceted")=="true"){_this.sliderGroup[targetID].activeSnapPoint=index;_this.sliderGroup[targetID].maxSnappoint=(_this.trusted=="false"||_this.trusted==false)?index:snapPointsElementsLen}_this.sliderGroup[targetID].snapPointsArr.push(NewSnapPointObj)});console.log(_this.sliderGroup[targetID].snapPointsArr);_this.sliderGroup[targetID].rangeSliderBtn=_this.sliderGroup[targetID].rangeSliderContainer.find('*[data-role="sliderBtn"]');_this.sliderGroup[targetID].rangeSliderBtnLabel=_this.sliderGroup[targetID].rangeSliderContainer.find('*[data-role="btnLabel"]');_this.sliderGroup[targetID].rangeSlideProgress=_this.sliderGroup[targetID].rangeSliderContainer.find('*[data-role="sliderProgress"]');_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor=_this.sliderGroup[targetID].rangeSlideProgress.attr("style");_this.sliderGroup[targetID].progressPercentage="";_this.activeSliderId=targetID},sliderBtnMouseUp:function(event){var _this=fnb.hyperion.forms.rangeSlider;if(_this.mousedown){console.log("sliderBtnMouseUp");_this.mousedown=false;var targetID=_this.activeSliderId;fnb.hyperion.delegate.off(this.body.elem,"mousemove",fnb.hyperion.forms.rangeSlider.bindToMouseMove);var i=0,len=_this.sliderGroup[targetID].snapPointsArr.length,closestPointIndex=0,pointVal=0,newPointVal=0;sliderPercentage=_this.sliderGroup[targetID].progressPercentage;for(i;i<len;i++){newPointVal=Math.abs(sliderPercentage-_this.sliderGroup[targetID].snapPointsArr[i].percentage);if(newPointVal<pointVal||pointVal==0){closestPointIndex=i;pointVal=newPointVal}}console.log("sliderPercentage :"+sliderPercentage+" closest Point Index :"+closestPointIndex);sliderPercentage=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].percentage;var snapPointLabel=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].dataBtnLabel;_this.setSnapValueToYouPay(targetID,closestPointIndex);_this.sliderGroup[targetID].rangeSlideProgress.find('![data-role="btnLabel"]').html(snapPointLabel);sliderPercentage=(sliderPercentage>100)?100:sliderPercentage;_this.doChangeLabelAlign(targetID,sliderPercentage);_this.sliderGroup[targetID].progressPercentage=sliderPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.calculatePackageTotal(targetID,closestPointIndex)}if(_this.touchstarted){_this.touchstarted=false;var targetID=_this.activeSliderId;var target=fnb.hyperion.$(event.currentTarget).find("! #sliderBtn"+targetID);fnb.hyperion.delegate.off(this.body.elem,"touchmove",fnb.hyperion.forms.rangeSlider.bindToTouchMove);fnb.hyperion.delegate.off(_this.body.elem,"touchmove",fnb.hyperion.forms.rangeSlider.BlockMove);var i=0,len=_this.sliderGroup[targetID].snapPointsArr.length,closestPointIndex=0,pointVal=0,newPointVal=0;var curentActiveSlider=fnb.hyperion.$("#rangeSliderContainer"+targetID);var position=curentActiveSlider.elem.getBoundingClientRect();var screenOffSet=position.left;var targetPosition=target.elem.getBoundingClientRect();var xOffSet=targetPosition.left-screenOffSet,percentage=Math.round(xOffSet/_this.sliderGroup[targetID].rangeSliderWidth*100),sliderPercentage=(percentage>100)?100:percentage;for(i;i<len;i++){newPointVal=Math.abs(sliderPercentage-_this.sliderGroup[targetID].snapPointsArr[i].percentage);if(newPointVal<pointVal||pointVal==0){closestPointIndex=i;pointVal=newPointVal}}sliderPercentage=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].percentage;var snapPointLabel=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].dataBtnLabel;_this.setSnapValueToYouPay(targetID,closestPointIndex);_this.sliderGroup[targetID].rangeSlideProgress.find('![data-role="btnLabel"]').html(snapPointLabel);sliderPercentage=(sliderPercentage>100)?100:sliderPercentage;_this.doChangeLabelAlign(targetID,sliderPercentage);_this.sliderGroup[targetID].progressPercentage=sliderPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.calculatePackageTotal(targetID,closestPointIndex)}},bindToTouchMove:function(event){var _this=fnb.hyperion.forms.rangeSlider,targetID=_this.activeSliderId;var curentActiveSlider=fnb.hyperion.$("#rangeSliderContainer"+targetID);var position=curentActiveSlider.elem.getBoundingClientRect();var screenOffSet=position.left;var xOffSet=event.touches[0].pageX-screenOffSet;var percentage=Math.round(xOffSet/_this.sliderGroup[targetID].rangeSliderWidth*100),percentage=(percentage<0)?0:percentage;console.log("Offset :"+xOffSet+" and percentage : "+percentage);_this.sliderGroup[targetID].progressPercentage=(percentage>100)?100:percentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.body.addClass("hideSelect")},BlockMove:function(event){event.stop()},bindToMouseMove:function(event){event.stop();var _this=fnb.hyperion.forms.rangeSlider,targetID=_this.activeSliderId,curentActiveSlider=fnb.hyperion.$("#rangeSliderContainer"+targetID),btnLabelEl=curentActiveSlider.find('! [data-role="btnLabel"]'),isClassBtnLeft=btnLabelEl.hasClass("btnLeft");var position=curentActiveSlider.elem.getBoundingClientRect();var screenOffSet=(isClassBtnLeft)?position.left-67:position.left+67;var clientX=(_this.sliderGroup[targetID].fixClientX)?event.clientX+position.left:event.clientX;var xOffSet=clientX-screenOffSet;var percentage=Math.round(xOffSet/_this.sliderGroup[targetID].rangeSliderWidth*100),percentage=(percentage<0)?0:percentage;_this.sliderGroup[targetID].progressPercentage=(percentage>100)?100:percentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.body.addClass("hideSelect")},snapToPointer:function(event){var _this=fnb.hyperion.forms.rangeSlider;_this.checkRenit();var target=fnb.hyperion.$(event.currentTarget).parent(),targetID=target.attr("data-sliderid"),SnapToPercentage=target.attr("data-percentage"),snapPointLabel=target.attr("data-btnlabel"),id=target.attr("id"),closestPointIndex=id.replace(/\D/g,"")-1;if(_this.sliderGroup==undefined){_this.sliderGroup={};_this.addToSliderGroup(targetID);_this.body=fnb.hyperion.$("#bodyContainer")}if(_this.activeSliderId!=targetID){if(_this.sliderGroup[targetID]==undefined){_this.addToSliderGroup(targetID)}else{_this.activeSliderId=targetID}}_this.setSnapValueToYouPay(targetID,closestPointIndex);_this.doChangeLabelAlign(targetID,SnapToPercentage);_this.sliderGroup[targetID].rangeSlideProgress.find('![data-role="btnLabel"]').html(snapPointLabel);_this.sliderGroup[targetID].progressPercentage=SnapToPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.calculatePackageTotal(targetID,closestPointIndex)},calculatePackageTotal:function(targetID,closestPointIndex){var _this=fnb.hyperion.forms.rangeSlider;var allYouPayElements=fnb.hyperion.$("* .youPayValue"),totalPackageElement=fnb.hyperion.$("#newPackageTotal"),availableCreditElement=fnb.hyperion.$("#availableCredit"),recurringBundleElement=fnb.hyperion.$("#recurringBundles"),currentPackageValue=0,total=0;if(_this.sliderType=="banking"){var currentPackageElement=fnb.hyperion.$("#currentPackageValue"),currentPackageValue=parseFloat(currentPackageElement.html());currentPackageValue=(currentPackageValue>0&&currentPackageValue!=undefined&&currentPackageValue!="")?currentPackageValue:0}allYouPayElements.each(function(element,index){total+=parseFloat(element.html())});var newPackageTotal=parseFloat(total+currentPackageValue).toFixed(2),recurringBundleTotal=parseFloat(total).toFixed(2);lastActiveSnapPoint=_this.sliderGroup[targetID].activeSnapPoint;maxValue=parseFloat(totalPackageElement.attr("data-maxvalue"));minValue=parseFloat(totalPackageElement.attr("data-minvalue"));snapMaxValue=_this.sliderGroup[targetID].maxSnappoint;availableCredit=parseFloat(maxValue-total).toFixed(2);if(total>maxValue&&maxValue>=0||closestPointIndex>snapMaxValue){lastActiveSnapPoint=(closestPointIndex>snapMaxValue)?snapMaxValue:lastActiveSnapPoint;_this.setSnapValueToYouPay(targetID,lastActiveSnapPoint);sliderPercentage=_this.sliderGroup[targetID].snapPointsArr[lastActiveSnapPoint].percentage;sliderPercentage=(sliderPercentage>100)?100:sliderPercentage;_this.doChangeLabelAlign(targetID,sliderPercentage);_this.sliderGroup[targetID].progressPercentage=sliderPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.sliderGroup[targetID].rangeSlideProgress.find('![data-role="btnLabel"]').html(_this.sliderGroup[targetID].snapPointsArr[lastActiveSnapPoint].dataBtnLabel);if(_this.sliderType=="banking"){var currentPackageElement=fnb.hyperion.$("#currentPackageValue"),currentPackageValue=parseFloat(currentPackageElement.html());currentPackageValue=(currentPackageValue>0&&currentPackageValue!=undefined&&currentPackageValue!="")?currentPackageValue:0}total=0;allYouPayElements.each(function(element,index){total+=parseFloat(element.html())});newPackageTotal=parseFloat(total+currentPackageValue).toFixed(2),recurringBundleTotal=parseFloat(total).toFixed(2);lastActiveSnapPoint=_this.sliderGroup[targetID].activeSnapPoint;availableCredit=parseFloat(maxValue-total).toFixed(2)}else{if(total<minValue&&minValue>=0){lastActiveSnapPoint=(lastActiveSnapPoint>0)?lastActiveSnapPoint:1;_this.setSnapValueToYouPay(targetID,lastActiveSnapPoint);sliderPercentage=_this.sliderGroup[targetID].snapPointsArr[lastActiveSnapPoint].percentage;allYouPayElements.each(function(element,index){total+=parseFloat(element.html())});newPackageTotal=parseFloat(total+currentPackageValue).toFixed(2),recurringBundleTotal=parseFloat(total).toFixed(2);availableCredit=parseFloat(maxValue-total).toFixed(2);_this.sliderGroup[targetID].activeSnapPoint=lastActiveSnapPoint;sliderPercentage=(sliderPercentage>100)?100:sliderPercentage;_this.doChangeLabelAlign(targetID,sliderPercentage);_this.sliderGroup[targetID].progressPercentage=sliderPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor);_this.sliderGroup[targetID].rangeSlideProgress.find('![data-role="btnLabel"]').html(_this.sliderGroup[targetID].snapPointsArr[lastActiveSnapPoint].dataBtnLabel)}}if(availableCreditElement.length()>0){availableCreditElement.html(availableCredit)}if(recurringBundleElement.length()>0){recurringBundleElement.html(recurringBundleTotal)}_this.sliderGroup[targetID].activeSnapPoint=closestPointIndex;totalPackageElement.html(newPackageTotal)},setSnapValueToYouPay:function(targetID,closestPointIndex){var _this=fnb.hyperion.forms.rangeSlider;if(_this.sliderType==="sales"){var youPayElement=fnb.hyperion.$("#youPayValue"+targetID);youPayElement.html(_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].value);youPayElement.attr("data-itemcode",_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].itemCode);youPayElement.attr("data-itemskucode",_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].itemSkuCode)}if(_this.sliderType==="banking"){fnb.hyperion.$("#youPayInput"+targetID).val(_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].itemCode);fnb.hyperion.$("#youPayValue"+targetID).html(_this.sliderGroup[targetID].snapPointsArr[closestPointIndex].value)}},getBrowserSize:function(event){var obj={};if(document.body&&document.body.offsetWidth){obj["winW"]=document.body.offsetWidth;obj["winH"]=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){obj["winW"]=document.documentElement.offsetWidth;obj["winH"]=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){obj["winW"]=window.innerWidth;obj["winH"]=window.innerHeight}return obj},setSliderToSnapPoint:function(sliderId,snapPoint){var _this=fnb.hyperion.forms.rangeSlider;var targetID=sliderId;if(_this.sliderGroup==undefined){_this.sliderGroup={};_this.addToSliderGroup(targetID)}if(_this.activeSliderId!=targetID){if(_this.sliderGroup[targetID]==undefined){_this.addToSliderGroup(targetID)}else{_this.activeSliderId=targetID}}_this.sliderGroup[targetID].snapPointsElements.each(function(element,index){if(index+1==snapPoint){_this.sliderGroup[targetID].progressPercentage=parseInt(element.attr("data-percentage"));_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor)}})},setSliderSnapPointToPercentage:function(sliderId,percentage){var _this=fnb.hyperion.forms.rangeSlider;console.log(_this);var targetID=sliderId;if(_this.sliderGroup==undefined){_this.sliderGroup={};_this.addToSliderGroup(targetID)}if(_this.activeSliderId!=targetID){if(_this.sliderGroup[targetID]==undefined){_this.addToSliderGroup(targetID)}else{_this.activeSliderId=targetID}}var i=0,len=_this.sliderGroup[targetID].snapPointsArr.length,closestPointIndex=0,pointVal=0,newPointVal=0;sliderPercentage=(percentage>100)?100:percentage;for(i;i<len;i++){newPointVal=Math.abs(sliderPercentage-_this.sliderGroup[targetID].snapPointsArr[i]);if(newPointVal<pointVal||pointVal==0){closestPointIndex=i;pointVal=newPointVal}}var snapPointLabel=_this.sliderGroup[targetID].snapPointsElements.find("!span.snapPoints"+closestPointIndex);sliderPercentage=_this.sliderGroup[targetID].snapPointsArr[closestPointIndex];sliderPercentage=(sliderPercentage>100)?100:sliderPercentage;_this.sliderGroup[targetID].progressPercentage=sliderPercentage;_this.sliderGroup[targetID].rangeSlideProgress.attr("style","width:"+_this.sliderGroup[targetID].progressPercentage+"%; "+_this.sliderGroup[targetID].rangeSlideProgressBackgroundColor)},getSnapPointValue:function(sliderId,snapPoint){var _this=fnb.hyperion.forms.rangeSlider,targetID=sliderId;if(_this.sliderGroup==undefined){_this.sliderGroup={};_this.addToSliderGroup(targetID)}if(_this.activeSliderId!=targetID){if(_this.sliderGroup[targetID]==undefined){_this.addToSliderGroup(targetID)}else{_this.activeSliderId=targetID}}var value=0;_this.sliderGroup[targetID].snapPointsElements.each(function(element,index){if(index+1==snapPoint){value=element.attr("data-value")}});return value},doChangeLabelAlign:function(targetID,percentage){var _this=fnb.hyperion.forms.rangeSlider;if(percentage>=51){if(_this.sliderGroup[targetID].rangeSliderBtnLabel.hasClass("btnRight")){_this.sliderGroup[targetID].rangeSliderBtnLabel.removeClass("btnRight")}_this.sliderGroup[targetID].rangeSliderBtnLabel.addClass("btnLeft")}else{if(_this.sliderGroup[targetID].rangeSliderBtnLabel.hasClass("btnLeft")){_this.sliderGroup[targetID].rangeSliderBtnLabel.removeClass("btnLeft")}_this.sliderGroup[targetID].rangeSliderBtnLabel.addClass("btnRight")}}};fnb.namespace("forms.rangeSlider",rangeSlider,true)})();(function(){function bindEvents(){var events=[{type:"frame",listener:document,events:"keyup",selector:"textarea",handler:"return fnb.hyperion.forms.textArea.updateChars(event);"}];fnb.hyperion.actions.addEvents(events)}function textArea(){}textArea.prototype={autoInit:true,init:function(){bindEvents()},updateChars:function(event){var _element=fnb.hyperion.$(event.currentTarget);var maxChars=_element.attr("data-charcount");if(_element.prop("value").length>maxChars){_element.prop("value",_element.prop("value").slice(0,maxChars))}else{var charsLeft=maxChars-_element.prop("value").length;_element.parent().find(".characterCount").html(charsLeft+" characters remaining")}},destroy:function(){fnb.hyperion.forms.textArea={}}};fnb.namespace("forms.textArea",textArea,true)})();